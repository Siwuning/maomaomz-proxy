const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["浮动面板.ffExLTB3.chunk.js","浮动面板.css"])))=>i.map(i=>d[i]);
const e={},t=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName('link');const t=document.querySelector('meta[property=csp-nonce]'),o=t?.nonce||t?.getAttribute('nonce');s=n.map(t=>{if((t=function(e){return'/'+e}(t))in e)return;e[t]=!0;const n=t.endsWith('.css'),r=n?'[rel="stylesheet"]':'';if(document.querySelector(`link[href="${t}"]${r}`))return;const s=document.createElement('link');return s.rel=n?'stylesheet':'modulepreload',n||(s.as='script'),s.crossOrigin='',s.href=t,o&&s.setAttribute('nonce',o),document.head.appendChild(s),n?new Promise((e,n)=>{s.addEventListener('load',e),s.addEventListener('error',()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),r=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:'fulfilled',value:e}),e=>({status:'rejected',reason:e}))))}var s;function a(e){const t=new Event('vite:preloadError',{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(e=>{for(const t of e||[])'rejected'===t.status&&a(t.reason);return t().catch(a)})};
/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function n(e){const t=Object.create(null);for(const n of e.split(','))t[n]=1;return e=>e in t}const o={},r=[],s=()=>{},a=()=>!1,l=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),i=e=>e.startsWith('onUpdate:'),c=Object.assign,u=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},d=Object.prototype.hasOwnProperty,f=(e,t)=>d.call(e,t),p=Array.isArray,g=e=>'[object Map]'===T(e),h=e=>'[object Set]'===T(e),m=e=>'[object Date]'===T(e),y=e=>'function'==typeof e,v=e=>'string'==typeof e,b=e=>'symbol'==typeof e,w=e=>null!==e&&'object'==typeof e,x=e=>(w(e)||y(e))&&y(e.then)&&y(e.catch),S=Object.prototype.toString,T=e=>S.call(e),k=e=>'[object Object]'===T(e),I=e=>v(e)&&'NaN'!==e&&'-'!==e[0]&&''+parseInt(e,10)===e,C=n(',key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted'),A=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},M=/-\w/g,O=A(e=>e.replace(M,e=>e.slice(1).toUpperCase())),P=/\B([A-Z])/g,E=A(e=>e.replace(P,'-$1').toLowerCase()),D=A(e=>e.charAt(0).toUpperCase()+e.slice(1)),L=A(e=>e?`on${D(e)}`:''),j=(e,t)=>!Object.is(e,t),R=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},F=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},N=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let H;const V=()=>H||(H='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof self?self:'undefined'!=typeof window?window:'undefined'!=typeof global?global:{});function U(e){if(p(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=v(o)?q(o):U(o);if(r)for(const e in r)t[e]=r[e]}return t}if(v(e)||w(e))return e}const B=/;(?![^(]*\))/g,W=/:([^]+)/,J=/\/\*[^]*?\*\//g;function q(e){const t={};return e.replace(J,'').split(B).forEach(e=>{if(e){const n=e.split(W);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function K(e){let t='';if(v(e))t=e;else if(p(e))for(let n=0;n<e.length;n++){const o=K(e[n]);o&&(t+=o+' ')}else if(w(e))for(const n in e)e[n]&&(t+=n+' ');return t.trim()}const G=n('itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly');function Y(e){return!!e||''===e}function X(e,t){if(e===t)return!0;let n=m(e),o=m(t);if(n||o)return!(!n||!o)&&e.getTime()===t.getTime();if(n=b(e),o=b(t),n||o)return e===t;if(n=p(e),o=p(t),n||o)return!(!n||!o)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=X(e[o],t[o]);return n}(e,t);if(n=w(e),o=w(t),n||o){if(!n||!o)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const o=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(o&&!r||!o&&r||!X(e[n],t[n]))return!1}}return String(e)===String(t)}function Z(e,t){return e.findIndex(e=>X(e,t))}const Q=e=>!(!e||!0!==e.__v_isRef),ee=e=>v(e)?e:null==e?'':p(e)||w(e)&&(e.toString===S||!y(e.toString))?Q(e)?ee(e.value):JSON.stringify(e,te,2):String(e),te=(e,t)=>Q(t)?te(e,t.value):g(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],o)=>(e[ne(t,o)+' =>']=n,e),{})}:h(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ne(e))}:b(t)?ne(t):!w(t)||p(t)||k(t)?t:String(t),ne=(e,t='')=>{var n;return b(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let oe,re;class se{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!e&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=oe;try{return oe=this,e()}finally{oe=t}}}on(){1===++this._on&&(this.prevScope=oe,oe=this)}off(){this._on>0&&0===--this._on&&(oe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function ae(e){return new se(e)}function le(){return oe}const ie=new WeakSet;class ce{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,ie.has(this)&&(ie.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||pe(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,Ie(this),me(this);const e=re,t=xe;re=this,xe=!0;try{return this.fn()}finally{ye(this),re=e,xe=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)be(e);this.deps=this.depsTail=void 0,Ie(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?ie.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ve(this)&&this.run()}get dirty(){return ve(this)}}let ue,de,fe=0;function pe(e,t=!1){if(e.flags|=8,t)return e.next=de,void(de=e);e.next=ue,ue=e}function ge(){fe++}function he(){if(--fe>0)return;if(de){let e=de;for(de=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ue;){let n=ue;for(ue=void 0;n;){const o=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=o}}if(e)throw e}function me(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ye(e){let t,n=e.depsTail,o=n;for(;o;){const e=o.prevDep;-1===o.version?(o===n&&(n=e),be(o),we(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=e}e.deps=t,e.depsTail=n}function ve(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_e(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _e(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ce)return;if(e.globalVersion=Ce,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!ve(e)))return;e.flags|=2;const t=e.dep,n=re,o=xe;re=e,xe=!0;try{me(e);const n=e.fn(e._value);(0===t.version||j(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(r){throw t.version++,r}finally{re=n,xe=o,ye(e),e.flags&=-3}}function be(e,t=!1){const{dep:n,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)be(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function we(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let xe=!0;const Se=[];function Te(){Se.push(xe),xe=!1}function ke(){const e=Se.pop();xe=void 0===e||e}function Ie(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=re;re=void 0;try{t()}finally{re=e}}}let Ce=0;class Ae{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $e{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!re||!xe||re===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==re)t=this.activeLink=new Ae(re,this),re.deps?(t.prevDep=re.depsTail,re.depsTail.nextDep=t,re.depsTail=t):re.deps=re.depsTail=t,Me(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=re.depsTail,t.nextDep=void 0,re.depsTail.nextDep=t,re.depsTail=t,re.deps===t&&(re.deps=e)}return t}trigger(e){this.version++,Ce++,this.notify(e)}notify(e){ge();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{he()}}}function Me(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Me(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Oe=new WeakMap,Pe=Symbol(''),Ee=Symbol(''),De=Symbol('');function Le(e,t,n){if(xe&&re){let t=Oe.get(e);t||Oe.set(e,t=new Map);let o=t.get(n);o||(t.set(n,o=new $e),o.map=t,o.key=n),o.track()}}function je(e,t,n,o,r,s){const a=Oe.get(e);if(!a)return void Ce++;const l=e=>{e&&e.trigger()};if(ge(),'clear'===t)a.forEach(l);else{const r=p(e),s=r&&I(n);if(r&&'length'===n){const e=Number(o);a.forEach((t,n)=>{('length'===n||n===De||!b(n)&&n>=e)&&l(t)})}else switch((void 0!==n||a.has(void 0))&&l(a.get(n)),s&&l(a.get(De)),t){case'add':r?s&&l(a.get('length')):(l(a.get(Pe)),g(e)&&l(a.get(Ee)));break;case'delete':r||(l(a.get(Pe)),g(e)&&l(a.get(Ee)));break;case'set':g(e)&&l(a.get(Pe))}}he()}function ze(e){const t=wt(e);return t===e?t:(Le(t,0,De),_t(e)?t:t.map(St))}function Re(e){return Le(e=wt(e),0,De),e}const Fe={__proto__:null,[Symbol.iterator](){return Ne(this,Symbol.iterator,St)},concat(...e){return ze(this).concat(...e.map(e=>p(e)?ze(e):e))},entries(){return Ne(this,'entries',e=>(e[1]=St(e[1]),e))},every(e,t){return Ve(this,'every',e,t,void 0,arguments)},filter(e,t){return Ve(this,'filter',e,t,e=>e.map(St),arguments)},find(e,t){return Ve(this,'find',e,t,St,arguments)},findIndex(e,t){return Ve(this,'findIndex',e,t,void 0,arguments)},findLast(e,t){return Ve(this,'findLast',e,t,St,arguments)},findLastIndex(e,t){return Ve(this,'findLastIndex',e,t,void 0,arguments)},forEach(e,t){return Ve(this,'forEach',e,t,void 0,arguments)},includes(...e){return Be(this,'includes',e)},indexOf(...e){return Be(this,'indexOf',e)},join(e){return ze(this).join(e)},lastIndexOf(...e){return Be(this,'lastIndexOf',e)},map(e,t){return Ve(this,'map',e,t,void 0,arguments)},pop(){return We(this,'pop')},push(...e){return We(this,'push',e)},reduce(e,...t){return Ue(this,'reduce',e,t)},reduceRight(e,...t){return Ue(this,'reduceRight',e,t)},shift(){return We(this,'shift')},some(e,t){return Ve(this,'some',e,t,void 0,arguments)},splice(...e){return We(this,'splice',e)},toReversed(){return ze(this).toReversed()},toSorted(e){return ze(this).toSorted(e)},toSpliced(...e){return ze(this).toSpliced(...e)},unshift(...e){return We(this,'unshift',e)},values(){return Ne(this,'values',St)}};function Ne(e,t,n){const o=Re(e),r=o[t]();return o===e||_t(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.done||(e.value=n(e.value)),e}),r}const He=Array.prototype;function Ve(e,t,n,o,r,s){const a=Re(e),l=a!==e&&!_t(e),i=a[t];if(i!==He[t]){const t=i.apply(e,s);return l?St(t):t}let c=n;a!==e&&(l?c=function(t,o){return n.call(this,St(t),o,e)}:n.length>2&&(c=function(t,o){return n.call(this,t,o,e)}));const u=i.call(a,c,o);return l&&r?r(u):u}function Ue(e,t,n,o){const r=Re(e);let s=n;return r!==e&&(_t(e)?n.length>3&&(s=function(t,o,r){return n.call(this,t,o,r,e)}):s=function(t,o,r){return n.call(this,t,St(o),r,e)}),r[t](s,...o)}function Be(e,t,n){const o=wt(e);Le(o,0,De);const r=o[t](...n);return-1!==r&&!1!==r||!bt(n[0])?r:(n[0]=wt(n[0]),o[t](...n))}function We(e,t,n=[]){Te(),ge();const o=wt(e)[t].apply(e,n);return he(),ke(),o}const Je=n('__proto__,__v_isRef,__isVue'),qe=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>'arguments'!==e&&'caller'!==e).map(e=>Symbol[e]).filter(b));function Ke(e){b(e)||(e=String(e));const t=wt(this);return Le(t,0,e),t.hasOwnProperty(e)}class Ge{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if('__v_skip'===t)return e.__v_skip;const o=this._isReadonly,r=this._isShallow;if('__v_isReactive'===t)return!o;if('__v_isReadonly'===t)return o;if('__v_isShallow'===t)return r;if('__v_raw'===t)return n===(o?r?ft:dt:r?ut:ct).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=p(e);if(!o){let e;if(s&&(e=Fe[t]))return e;if('hasOwnProperty'===t)return Ke}const a=Reflect.get(e,t,kt(e)?e:n);if(b(t)?qe.has(t):Je(t))return a;if(o||Le(e,0,t),r)return a;if(kt(a)){const e=s&&I(t)?a:a.value;return o&&w(e)?ht(e):e}return w(a)?o?ht(a):gt(a):a}}class Ye extends Ge{constructor(e=!1){super(!1,e)}set(e,t,n,o){let r=e[t];if(!this._isShallow){const t=vt(r);if(_t(n)||vt(n)||(r=wt(r),n=wt(n)),!p(e)&&kt(r)&&!kt(n))return t||(r.value=n),!0}const s=p(e)&&I(t)?Number(t)<e.length:f(e,t),a=Reflect.set(e,t,n,kt(e)?e:o);return e===wt(o)&&(s?j(n,r)&&je(e,'set',t,n):je(e,'add',t,n)),a}deleteProperty(e,t){const n=f(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&n&&je(e,'delete',t,void 0),o}has(e,t){const n=Reflect.has(e,t);return b(t)&&qe.has(t)||Le(e,0,t),n}ownKeys(e){return Le(e,0,p(e)?'length':Pe),Reflect.ownKeys(e)}}class Xe extends Ge{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Ze=new Ye,Qe=new Xe,et=new Ye(!0),tt=e=>e,nt=e=>Reflect.getPrototypeOf(e);function ot(e){return function(...t){return'delete'!==e&&('clear'===e?void 0:this)}}function rt(e,t){const n={get(n){const o=this.__v_raw,r=wt(o),s=wt(n);e||(j(n,s)&&Le(r,0,n),Le(r,0,s));const{has:a}=nt(r),l=t?tt:e?Tt:St;return a.call(r,n)?l(o.get(n)):a.call(r,s)?l(o.get(s)):void(o!==r&&o.get(n))},get size(){const t=this.__v_raw;return!e&&Le(wt(t),0,Pe),t.size},has(t){const n=this.__v_raw,o=wt(n),r=wt(t);return e||(j(t,r)&&Le(o,0,t),Le(o,0,r)),t===r?n.has(t):n.has(t)||n.has(r)},forEach(n,o){const r=this,s=r.__v_raw,a=wt(s),l=t?tt:e?Tt:St;return!e&&Le(a,0,Pe),s.forEach((e,t)=>n.call(o,l(e),l(t),r))}};c(n,e?{add:ot('add'),set:ot('set'),delete:ot('delete'),clear:ot('clear')}:{add(e){t||_t(e)||vt(e)||(e=wt(e));const n=wt(this);return nt(n).has.call(n,e)||(n.add(e),je(n,'add',e,e)),this},set(e,n){t||_t(n)||vt(n)||(n=wt(n));const o=wt(this),{has:r,get:s}=nt(o);let a=r.call(o,e);a||(e=wt(e),a=r.call(o,e));const l=s.call(o,e);return o.set(e,n),a?j(n,l)&&je(o,'set',e,n):je(o,'add',e,n),this},delete(e){const t=wt(this),{has:n,get:o}=nt(t);let r=n.call(t,e);r||(e=wt(e),r=n.call(t,e)),o&&o.call(t,e);const s=t.delete(e);return r&&je(t,'delete',e,void 0),s},clear(){const e=wt(this),t=0!==e.size,n=e.clear();return t&&je(e,'clear',void 0,void 0),n}});return['keys','values','entries',Symbol.iterator].forEach(o=>{n[o]=function(e,t,n){return function(...o){const r=this.__v_raw,s=wt(r),a=g(s),l='entries'===e||e===Symbol.iterator&&a,i='keys'===e&&a,c=r[e](...o),u=n?tt:t?Tt:St;return!t&&Le(s,0,i?Ee:Pe),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:l?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(o,e,t)}),n}function st(e,t){const n=rt(e,t);return(t,o,r)=>'__v_isReactive'===o?!e:'__v_isReadonly'===o?e:'__v_raw'===o?t:Reflect.get(f(n,o)&&o in t?n:t,o,r)}const at={get:st(!1,!1)},lt={get:st(!1,!0)},it={get:st(!0,!1)},ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case'Object':case'Array':return 1;case'Map':case'Set':case'WeakMap':case'WeakSet':return 2;default:return 0}}((e=>T(e).slice(8,-1))(e))}function gt(e){return vt(e)?e:mt(e,!1,Ze,at,ct)}function ht(e){return mt(e,!0,Qe,it,dt)}function mt(e,t,n,o,r){if(!w(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=pt(e);if(0===s)return e;const a=r.get(e);if(a)return a;const l=new Proxy(e,2===s?o:n);return r.set(e,l),l}function yt(e){return vt(e)?yt(e.__v_raw):!(!e||!e.__v_isReactive)}function vt(e){return!(!e||!e.__v_isReadonly)}function _t(e){return!(!e||!e.__v_isShallow)}function bt(e){return!!e&&!!e.__v_raw}function wt(e){const t=e&&e.__v_raw;return t?wt(t):e}function xt(e){return!f(e,'__v_skip')&&Object.isExtensible(e)&&F(e,'__v_skip',!0),e}const St=e=>w(e)?gt(e):e,Tt=e=>w(e)?ht(e):e;function kt(e){return!!e&&!0===e.__v_isRef}function It(e){return function(e,t){if(kt(e))return e;return new Ct(e,t)}(e,!1)}class Ct{constructor(e,t){this.dep=new $e,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:wt(e),this._value=t?e:St(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||_t(e)||vt(e);e=n?e:wt(e),j(e,t)&&(this._rawValue=e,this._value=n?e:St(e),this.dep.trigger())}}function At(e){return kt(e)?e.value:e}function $t(e){return y(e)?e():At(e)}const Mt={get:(e,t,n)=>'__v_raw'===t?e:At(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function Ot(e){return yt(e)?e:new Proxy(e,Mt)}class Pt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=Oe.get(e);return n&&n.get(t)}(wt(this._object),this._key)}}class Et{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Dt(e,t,n){return kt(e)?e:y(e)?new Et(e):w(e)&&arguments.length>1?Lt(e,t,n):It(e)}function Lt(e,t,n){const o=e[t];return kt(o)?o:new Pt(e,t,n)}class jt{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new $e(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ce-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&re!==this)return pe(this,!0),!0}get value(){const e=this.dep.track();return _e(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const zt={},Rt=new WeakMap;let Ft;function Nt(e,t,n=o){const{immediate:r,deep:a,once:l,scheduler:i,augmentJob:c,call:d}=n,f=e=>a?e:_t(e)||!1===a||0===a?Ht(e,1):Ht(e);let g,h,m,v,b=!1,w=!1;if(kt(e)?(h=()=>e.value,b=_t(e)):yt(e)?(h=()=>f(e),b=!0):p(e)?(w=!0,b=e.some(e=>yt(e)||_t(e)),h=()=>e.map(e=>kt(e)?e.value:yt(e)?f(e):y(e)?d?d(e,2):e():void 0)):h=y(e)?t?d?()=>d(e,2):e:()=>{if(m){Te();try{m()}finally{ke()}}const t=Ft;Ft=g;try{return d?d(e,3,[v]):e(v)}finally{Ft=t}}:s,t&&a){const e=h,t=!0===a?1/0:a;h=()=>Ht(e(),t)}const x=le(),S=()=>{g.stop(),x&&x.active&&u(x.effects,g)};if(l&&t){const e=t;t=(...t)=>{e(...t),S()}}let T=w?new Array(e.length).fill(zt):zt;const k=e=>{if(1&g.flags&&(g.dirty||e))if(t){const e=g.run();if(a||b||(w?e.some((e,t)=>j(e,T[t])):j(e,T))){m&&m();const n=Ft;Ft=g;try{const n=[e,T===zt?void 0:w&&T[0]===zt?[]:T,v];T=e,d?d(t,3,n):t(...n)}finally{Ft=n}}}else g.run()};return c&&c(k),g=new ce(h),g.scheduler=i?()=>i(k,!1):k,v=e=>function(e,t=!1,n=Ft){if(n){let t=Rt.get(n);t||Rt.set(n,t=[]),t.push(e)}}(e,!1,g),m=g.onStop=()=>{const e=Rt.get(g);if(e){if(d)d(e,4);else for(const t of e)t();Rt.delete(g)}},t?r?k(!0):T=g.run():i?i(k.bind(null,!0),!0):g.run(),S.pause=g.pause.bind(g),S.resume=g.resume.bind(g),S.stop=S,S}function Ht(e,t=1/0,n){if(t<=0||!w(e)||e.__v_skip)return e;if(((n=n||new Map).get(e)||0)>=t)return e;if(n.set(e,t),t--,kt(e))Ht(e.value,t,n);else if(p(e))for(let o=0;o<e.length;o++)Ht(e[o],t,n);else if(h(e)||g(e))e.forEach(e=>{Ht(e,t,n)});else if(k(e)){for(const o in e)Ht(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Ht(e[o],t,n)}return e}
/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vt(e,t,n,o){try{return o?e(...o):e()}catch(r){Bt(r,t,n)}}function Ut(e,t,n,o){if(y(e)){const r=Vt(e,t,n,o);return r&&x(r)&&r.catch(e=>{Bt(e,t,n)}),r}if(p(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Ut(e[s],t,n,o));return r}}function Bt(e,t,n,r=!0){t&&t.vnode;const{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||o;if(t){let o=t.parent;const r=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const t=o.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,a))return;o=o.parent}if(s)return Te(),Vt(s,null,10,[e,r,a]),void ke()}!function(e,t,n,o=!0,r=!1){if(r)throw e;console.error(e)}(e,0,0,r,a)}const Wt=[];let Jt=-1;const qt=[];let Kt=null,Gt=0;const Yt=Promise.resolve();let Xt=null;function Zt(e){const t=Xt||Yt;return e?t.then(this?e.bind(this):e):t}function Qt(e){if(!(1&e.flags)){const t=on(e),n=Wt[Wt.length-1];!n||!(2&e.flags)&&t>=on(n)?Wt.push(e):Wt.splice(function(e){let t=Jt+1,n=Wt.length;for(;t<n;){const o=t+n>>>1,r=Wt[o],s=on(r);s<e||s===e&&2&r.flags?t=o+1:n=o}return t}(t),0,e),e.flags|=1,en()}}function en(){Xt||(Xt=Yt.then(rn))}function tn(e,t,n=Jt+1){for(;n<Wt.length;n++){const t=Wt[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Wt.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function nn(e){if(qt.length){const e=[...new Set(qt)].sort((e,t)=>on(e)-on(t));if(qt.length=0,Kt)return void Kt.push(...e);for(Kt=e,Gt=0;Gt<Kt.length;Gt++){const e=Kt[Gt];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Kt=null,Gt=0}}const on=e=>null==e.id?2&e.flags?-1:1/0:e.id;function rn(e){try{for(Jt=0;Jt<Wt.length;Jt++){const e=Wt[Jt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Vt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Jt<Wt.length;Jt++){const e=Wt[Jt];e&&(e.flags&=-2)}Jt=-1,Wt.length=0,nn(),Xt=null,(Wt.length||qt.length)&&rn()}}let sn=null,an=null;function ln(e){const t=sn;return sn=e,an=e&&e.type.__scopeId||null,t}function cn(e,t){if(null===sn)return e;const n=or(sn),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,a,l,i=o]=t[s];e&&(y(e)&&(e={mounted:e,updated:e}),e.deep&&Ht(a),r.push({dir:e,instance:n,value:a,oldValue:void 0,arg:l,modifiers:i}))}return e}function un(e,t,n,o){const r=e.dirs,s=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];s&&(l.oldValue=s[a].value);let i=l.dir[o];i&&(Te(),Ut(i,n,8,[e.el,l,e,t]),ke())}}const dn=Symbol('_vte'),fn=Symbol('_leaveCb');function pn(e,t){6&e.shapeFlag&&e.component?(e.transition=t,pn(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function gn(e,t){return y(e)?(()=>c({name:e.name},t,{setup:e}))():e}const hn=new WeakMap;function mn(e,t,n,r,s=!1){if(p(e))return void e.forEach((e,o)=>mn(e,t&&(p(t)?t[o]:t),n,r,s));if(vn(r)&&!s)return void(512&r.shapeFlag&&r.type.__asyncResolved&&r.component.subTree.component&&mn(e,t,n,r.component.subTree));const l=4&r.shapeFlag?or(r.component):r.el,i=s?null:l,{i:c,r:d}=e,g=t&&t.r,h=c.refs===o?c.refs={}:c.refs,m=c.setupState,b=wt(m),w=m===o?a:e=>f(b,e);if(null!=g&&g!==d)if(yn(t),v(g))h[g]=null,w(g)&&(m[g]=null);else if(kt(g)){g.value=null;const e=t;e.k&&(h[e.k]=null)}if(y(d))Vt(d,c,12,[i,h]);else{const t=v(d),o=kt(d);if(t||o){const r=()=>{if(e.f){const n=t?w(d)?m[d]:h[d]:d.value;if(s)p(n)&&u(n,l);else if(p(n))n.includes(l)||n.push(l);else if(t)h[d]=[l],w(d)&&(m[d]=h[d]);else{const t=[l];d.value=t,e.k&&(h[e.k]=t)}}else t?(h[d]=i,w(d)&&(m[d]=i)):o&&(d.value=i,e.k&&(h[e.k]=i))};if(i){const t=()=>{r(),hn.delete(e)};t.id=-1,hn.set(e,t),Yn(t,n)}else yn(e),r()}}}function yn(e){const t=hn.get(e);t&&(t.flags|=8,hn.delete(e))}V().requestIdleCallback,V().cancelIdleCallback;const vn=e=>!!e.type.__asyncLoader;const _n=e=>(t,n=Jo)=>{Qo&&'sp'!==e||function(e,t,n=Jo,o=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Te();const r=Yo(n),s=Ut(t,n,e,o);return r(),ke(),s});o?r.unshift(s):r.push(s)}}(e,(...e)=>t(...e),n)},bn=_n('m'),wn=_n('bum'),xn=_n('um'),Sn=Symbol.for('v-ndc');function Tn(e){return v(e)?function(e,t,n=!0,o=!1){const r=sn||Jo;if(r){const n=r.type;{const e=rr(n,!1);if(e&&(e===t||e===O(t)||e===D(O(t))))return n}const s=kn(r[e]||n[e],t)||kn(r.appContext[e],t);return!s&&o?n:s}}('components',e,!1)||e:e||Sn}function kn(e,t){return e&&(e[t]||e[O(t)]||e[D(O(t))])}function In(e,t,n,o){let r;const s=n,a=p(e);if(a||v(e)){let n=!1,o=!1;a&&yt(e)&&(n=!_t(e),o=vt(e),e=Re(e)),r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]=t(n?o?Tt(St(e[a])):St(e[a]):e[a],a,void 0,s)}else if('number'==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,s)}else if(w(e))if(e[Symbol.iterator])r=Array.from(e,(e,n)=>t(e,n,void 0,s));else{const n=Object.keys(e);r=new Array(n.length);for(let o=0,a=n.length;o<a;o++){const a=n[o];r[o]=t(e[a],a,o,s)}}else r=[];return r}const Cn=e=>e?Zo(e)?or(e):Cn(e.parent):null,An=c(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Cn(e.parent),$root:e=>Cn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>e.type,$forceUpdate:e=>e.f||(e.f=()=>{Qt(e.update)}),$nextTick:e=>e.n||(e.n=Zt.bind(e.proxy)),$watch:e=>s}),$n=(e,t)=>e!==o&&!e.__isScriptSetup&&f(e,t),Mn={get({_:e},t){if('__v_skip'===t)return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:l,type:i,appContext:c}=e;let u;if('$'!==t[0]){const i=l[t];if(void 0!==i)switch(i){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if($n(r,t))return l[t]=1,r[t];if((u=e.propsOptions[0])&&f(u,t))return l[t]=3,a[t];if(n!==o&&f(n,t))return l[t]=4,n[t];l[t]=0}}const d=An[t];let p,g;return d?('$attrs'===t&&Le(e.attrs,0,''),d(e)):(p=i.__cssModules)&&(p=p[t])?p:n!==o&&f(n,t)?(l[t]=4,n[t]):(g=c.config.globalProperties,f(g,t)?g[t]:void 0)},set({_:e},t,n){const{data:o,setupState:r,ctx:s}=e;return $n(r,t)?(r[t]=n,!0):!f(e.props,t)&&(('$'!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:s,type:a}},l){let i,c;return!!(n[l]||$n(t,l)||(i=s[0])&&f(i,l)||f(o,l)||f(An,l)||f(r.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:f(n,'value')&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function On(){return{app:null,config:{isNativeTag:a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pn=0;function En(e,t){return function(t,n=null){y(t)||(t=c({},t)),null==n||w(n)||(n=null);const o=On(),r=new WeakSet,s=[];let a=!1;const l=o.app={_uid:Pn++,_component:t,_props:n,_container:null,_context:o,_instance:null,version:ar,get config(){return o.config},set config(e){},use:(e,...t)=>(r.has(e)||(e&&y(e.install)?(r.add(e),e.install(l,...t)):y(e)&&(r.add(e),e(l,...t))),l),mixin:e=>l,component:(e,t)=>t?(o.components[e]=t,l):o.components[e],directive:(e,t)=>t?(o.directives[e]=t,l):o.directives[e],mount(r,s,i){if(!a){const s=l._ceVNode||Do(t,n);return s.appContext=o,!0===i?i='svg':!1===i&&(i=void 0),e(s,r,i),a=!0,l._container=r,r.__vue_app__=l,or(s.component)}},onUnmount(e){s.push(e)},unmount(){a&&(Ut(s,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide:(e,t)=>(o.provides[e]=t,l),runWithContext(e){const t=Dn;Dn=l;try{return e()}finally{Dn=t}}};return l}}let Dn=null;function Ln(e,t,n=!1){const o=qo();if(o||Dn){let r=Dn?Dn._context.provides:o?null==o.parent||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&y(t)?t.call(o&&o.proxy):t}}const jn={},zn=()=>Object.create(jn),Rn=e=>Object.getPrototypeOf(e)===jn;function Fn(e,t,n,o=!1){const r={},s=zn();e.propsDefaults=Object.create(null),Nn(e,t,r,s);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=o?r:mt(r,!1,et,lt,ut):e.type.props?e.props=r:e.props=s,e.attrs=s}function Nn(e,t,n,r){const[s,a]=e.propsOptions;let l,i=!1;if(t)for(let o in t){if(C(o))continue;const c=t[o];let u;s&&f(s,u=O(o))?a&&a.includes(u)?(l||(l={}))[u]=c:n[u]=c:uo(e.emitsOptions,o)||o in r&&c===r[o]||(r[o]=c,i=!0)}if(a){const t=wt(n),r=l||o;for(let o=0;o<a.length;o++){const l=a[o];n[l]=Hn(s,t,l,r[l],e,!f(r,l))}}return i}function Hn(e,t,n,o,r,s){const a=e[n];if(null!=a){const e=f(a,'default');if(e&&void 0===o){const e=a.default;if(a.type!==Function&&!a.skipFactory&&y(e)){const{propsDefaults:s}=r;if(n in s)o=s[n];else{const a=Yo(r);o=s[n]=e.call(null,t),a()}}else o=e;r.ce&&r.ce._setProp(n,o)}a[0]&&(s&&!e?o=!1:!a[1]||''!==o&&o!==E(n)||(o=!0))}return o}function Vn(e,t,n=!1){const s=t.propsCache,a=s.get(e);if(a)return a;const l=e.props,i={},u=[];if(!l)return w(e)&&s.set(e,r),r;if(p(l))for(let r=0;r<l.length;r++){const e=O(l[r]);Un(e)&&(i[e]=o)}else if(l)for(const o in l){const e=O(o);if(Un(e)){const t=l[o],n=i[e]=p(t)||y(t)?{type:t}:c({},t),r=n.type;let s=!1,a=!0;if(p(r))for(let e=0;e<r.length;++e){const t=r[e],n=y(t)&&t.name;if('Boolean'===n){s=!0;break}'String'===n&&(a=!1)}else s=y(r)&&'Boolean'===r.name;n[0]=s,n[1]=a,(s||f(n,'default'))&&u.push(e)}}const d=[i,u];return w(e)&&s.set(e,d),d}function Un(e){return'$'!==e[0]&&!C(e)}const Bn=e=>'_'===e||'_ctx'===e||'$stable'===e,Wn=e=>p(e)?e.map(Fo):[Fo(e)],Jn=(e,t,n)=>{if(t._n)return t;const o=function(e,t=sn){if(!t)return e;if(e._n)return e;const n=(...o)=>{n._d&&ko(-1);const r=ln(t);let s;try{s=e(...o)}finally{ln(r),n._d&&ko(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}((...e)=>Wn(t(...e)),n);return o._c=!1,o},qn=(e,t,n)=>{const o=e._ctx;for(const r in e){if(Bn(r))continue;const n=e[r];if(y(n))t[r]=Jn(0,n,o);else if(null!=n){const e=Wn(n);t[r]=()=>e}}},Kn=(e,t)=>{const n=Wn(t);e.slots.default=()=>n},Gn=(e,t,n)=>{for(const o in t)!n&&Bn(o)||(e[o]=t[o])},Yn=function(e,t){t&&t.pendingBranch?p(e)?t.effects.push(...e):t.effects.push(e):(p(n=e)?qt.push(...n):Kt&&-1===n.id?Kt.splice(Gt+1,0,n):1&n.flags||(qt.push(n),n.flags|=1),en());var n};function Xn(e){return function(e){V().__VUE__=!0;const{insert:t,remove:n,patchProp:a,createElement:l,createText:i,createComment:c,setText:u,setElementText:d,parentNode:p,nextSibling:g,setScopeId:h=s,insertStaticContent:m}=e,y=(e,t,n,o=null,r=null,s=null,a=void 0,l=null,i=!!t.dynamicChildren)=>{if(e===t)return;e&&!Mo(e,t)&&(o=te(e),Y(e,r,s,!0),e=null),-2===t.patchFlag&&(i=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case vo:v(e,t,n,o);break;case _o:b(e,t,n,o);break;case bo:null==e&&w(t,n,o,a);break;case yo:j(e,t,n,o,r,s,a,l,i);break;default:1&d?k(e,t,n,o,r,s,a,l,i):6&d?N(e,t,n,o,r,s,a,l,i):(64&d||128&d)&&c.process(e,t,n,o,r,s,a,l,i,re)}null!=u&&r?mn(u,e&&e.ref,s,t||e,!t):null==u&&e&&null!=e.ref&&mn(e.ref,null,s,e,!0)},v=(e,n,o,r)=>{if(null==e)t(n.el=i(n.children),o,r);else{const t=n.el=e.el;n.children!==e.children&&u(t,n.children)}},b=(e,n,o,r)=>{null==e?t(n.el=c(n.children||''),o,r):n.el=e.el},w=(e,t,n,o)=>{[e.el,e.anchor]=m(e.children,t,n,o,e.el,e.anchor)},S=({el:e,anchor:n},o,r)=>{let s;for(;e&&e!==n;)s=g(e),t(e,o,r),e=s;t(n,o,r)},T=({el:e,anchor:t})=>{let o;for(;e&&e!==t;)o=g(e),n(e),e=o;n(t)},k=(e,t,n,o,r,s,a,l,i)=>{if('svg'===t.type?a='svg':'math'===t.type&&(a='mathml'),null==e)I(t,n,o,r,s,a,l,i);else{const n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),P(e,t,r,s,a,l,i)}finally{n&&n._endPatch()}}},I=(e,n,o,r,s,i,c,u)=>{let f,p;const{props:g,shapeFlag:h,transition:m,dirs:y}=e;if(f=e.el=l(e.type,i,g&&g.is,g),8&h?d(f,e.children):16&h&&M(e.children,f,null,r,s,Zn(e,i),c,u),y&&un(e,null,r,'created'),A(f,e,e.scopeId,c,r),g){for(const e in g)'value'===e||C(e)||a(f,e,null,g[e],i,r);'value'in g&&a(f,'value',null,g.value,i),(p=g.onVnodeBeforeMount)&&Uo(p,r,e)}y&&un(e,null,r,'beforeMount');const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(s,m);v&&m.beforeEnter(f),t(f,n,o),((p=g&&g.onVnodeMounted)||v||y)&&Yn(()=>{p&&Uo(p,r,e),v&&m.enter(f),y&&un(e,null,r,'mounted')},s)},A=(e,t,n,o,r)=>{if(n&&h(e,n),o)for(let s=0;s<o.length;s++)h(e,o[s]);if(r){let n=r.subTree;if(t===n||mo(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=r.vnode;A(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},M=(e,t,n,o,r,s,a,l,i=0)=>{for(let c=i;c<e.length;c++){const i=e[c]=l?No(e[c]):Fo(e[c]);y(null,i,t,n,o,r,s,a,l)}},P=(e,t,n,r,s,l,i)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:f,dirs:p}=t;u|=16&e.patchFlag;const g=e.props||o,h=t.props||o;let m;if(n&&Qn(n,!1),(m=h.onVnodeBeforeUpdate)&&Uo(m,n,t,e),p&&un(t,e,n,'beforeUpdate'),n&&Qn(n,!0),(g.innerHTML&&null==h.innerHTML||g.textContent&&null==h.textContent)&&d(c,''),f?D(e.dynamicChildren,f,c,n,r,Zn(t,s),l):i||J(e,t,c,null,n,r,Zn(t,s),l,!1),u>0){if(16&u)L(c,g,h,n,s);else if(2&u&&g.class!==h.class&&a(c,'class',null,h.class,s),4&u&&a(c,'style',g.style,h.style,s),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const o=e[t],r=g[o],l=h[o];l===r&&'value'!==o||a(c,o,r,l,s,n)}}1&u&&e.children!==t.children&&d(c,t.children)}else i||null!=f||L(c,g,h,n,s);((m=h.onVnodeUpdated)||p)&&Yn(()=>{m&&Uo(m,n,t,e),p&&un(t,e,n,'updated')},r)},D=(e,t,n,o,r,s,a)=>{for(let l=0;l<t.length;l++){const i=e[l],c=t[l],u=i.el&&(i.type===yo||!Mo(i,c)||198&i.shapeFlag)?p(i.el):n;y(i,c,u,null,o,r,s,a,!0)}},L=(e,t,n,r,s)=>{if(t!==n){if(t!==o)for(const o in t)C(o)||o in n||a(e,o,t[o],null,s,r);for(const o in n){if(C(o))continue;const l=n[o],i=t[o];l!==i&&'value'!==o&&a(e,o,i,l,s,r)}'value'in n&&a(e,'value',t.value,n.value,s)}},j=(e,n,o,r,s,a,l,c,u)=>{const d=n.el=e?e.el:i(''),f=n.anchor=e?e.anchor:i('');let{patchFlag:p,dynamicChildren:g,slotScopeIds:h}=n;h&&(c=c?c.concat(h):h),null==e?(t(d,o,r),t(f,o,r),M(n.children||[],o,f,s,a,l,c,u)):p>0&&64&p&&g&&e.dynamicChildren?(D(e.dynamicChildren,g,o,s,a,l,c),(null!=n.key||s&&n===s.subTree)&&eo(e,n,!0)):J(e,n,o,f,s,a,l,c,u)},N=(e,t,n,o,r,s,a,l,i)=>{t.slotScopeIds=l,null==e?512&t.shapeFlag?r.ctx.activate(t,n,o,a,i):H(t,n,o,r,s,a,i):U(e,t,i)},H=(e,t,n,r,s,a,l)=>{const i=e.component=function(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Bo,a={uid:Wo++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new se(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:['',0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vn(r,s),emitsOptions:co(r,s),emit:null,emitted:null,propsDefaults:o,inheritAttrs:r.inheritAttrs,ctx:o,data:o,props:o,attrs:o,slots:o,refs:o,setupState:o,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};a.ctx={_:a},a.root=t?t.root:a,a.emit=io.bind(null,a),e.ce&&e.ce(a);return a}(e,r,s);if(e.type.__isKeepAlive&&(i.ctx.renderer=re),function(e,t=!1,n=!1){t&&Go(t);const{props:o,children:r}=e.vnode,s=Zo(e);Fn(e,o,s,t),((e,t,n)=>{const o=e.slots=zn();if(32&e.vnode.shapeFlag){const e=t._;e?(Gn(o,t,n),n&&F(o,'_',e,!0)):qn(t,o)}else t&&Kn(e,t)})(e,r,n||t);const a=s?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Mn);const{setup:o}=n;if(o){Te();const n=e.setupContext=o.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,nr),slots:e.slots,emit:e.emit,expose:t}}(e):null,r=Yo(e),s=Vt(o,e,0,[e.props,n]),a=x(s);if(ke(),r(),!a&&!e.sp||vn(e)||function(e){e.ids=[e.ids[0]+e.ids[2]+++'-',0,0]}(e),a){if(s.then(Xo,Xo),t)return s.then(t=>{er(e,t)}).catch(t=>{Bt(t,e,0)});e.asyncDep=s}else er(e,s)}else tr(e)}(e,t):void 0;t&&Go(!1)}(i,!1,l),i.asyncDep){if(s&&s.registerDep(i,B,l),!e.el){const o=i.subTree=Do(_o);b(null,o,t,n),e.placeholder=o.el}}else B(i,e,t,n,s,a,l)},U=(e,t,n)=>{const o=t.component=e.component;if(function(e,t,n){const{props:o,children:r,component:s}=e,{props:a,children:l,patchFlag:i}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&i>=0))return!(!r&&!l||l&&l.$stable)||o!==a&&(o?!a||ho(o,a,c):!!a);if(1024&i)return!0;if(16&i)return o?ho(o,a,c):!!a;if(8&i){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==o[n]&&!uo(c,n))return!0}}return!1}(e,t,n)){if(o.asyncDep&&!o.asyncResolved)return void W(o,t,n);o.next=t,o.update()}else t.el=e.el,o.vnode=t},B=(e,t,n,o,r,s,a)=>{const l=()=>{if(e.isMounted){let{next:t,bu:n,u:o,parent:i,vnode:c}=e;{const n=to(e);if(n)return t&&(t.el=c.el,W(e,t,a)),void n.asyncDep.then(()=>{e.isUnmounted||l()})}let u,d=t;Qn(e,!1),t?(t.el=c.el,W(e,t,a)):t=c,n&&R(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&Uo(u,i,t,c),Qn(e,!0);const f=fo(e),g=e.subTree;e.subTree=f,y(g,f,p(g.el),te(g),e,r,s),t.el=f.el,null===d&&function({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,f.el),o&&Yn(o,r),(u=t.props&&t.props.onVnodeUpdated)&&Yn(()=>Uo(u,i,t,c),r)}else{let a;const{el:l,props:i}=t,{bm:c,m:u,parent:d,root:f,type:p}=e,g=vn(t);Qn(e,!1),c&&R(c),!g&&(a=i&&i.onVnodeBeforeMount)&&Uo(a,d,t),Qn(e,!0);{f.ce&&!1!==f.ce._def.shadowRoot&&f.ce._injectChildStyle(p);const a=e.subTree=fo(e);y(null,a,n,o,e,r,s),t.el=a.el}if(u&&Yn(u,r),!g&&(a=i&&i.onVnodeMounted)){const e=t;Yn(()=>Uo(a,d,e),r)}(256&t.shapeFlag||d&&vn(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&Yn(e.a,r),e.isMounted=!0,t=n=o=null}};e.scope.on();const i=e.effect=new ce(l);e.scope.off();const c=e.update=i.run.bind(i),u=e.job=i.runIfDirty.bind(i);u.i=e,u.id=e.uid,i.scheduler=()=>Qt(u),Qn(e,!0),c()},W=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,o){const{props:r,attrs:s,vnode:{patchFlag:a}}=e,l=wt(r),[i]=e.propsOptions;let c=!1;if(!(o||a>0)||16&a){let o;Nn(e,t,r,s)&&(c=!0);for(const s in l)t&&(f(t,s)||(o=E(s))!==s&&f(t,o))||(i?!n||void 0===n[s]&&void 0===n[o]||(r[s]=Hn(i,l,s,void 0,e,!0)):delete r[s]);if(s!==l)for(const e in s)t&&f(t,e)||(delete s[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let o=0;o<n.length;o++){let a=n[o];if(uo(e.emitsOptions,a))continue;const u=t[a];if(i)if(f(s,a))u!==s[a]&&(s[a]=u,c=!0);else{const t=O(a);r[t]=Hn(i,l,t,u,e,!1)}else u!==s[a]&&(s[a]=u,c=!0)}}c&&je(e.attrs,'set','')}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:s}=e;let a=!0,l=o;if(32&r.shapeFlag){const e=t._;e?n&&1===e?a=!1:Gn(s,t,n):(a=!t.$stable,qn(t,s)),l=t}else t&&(Kn(e,t),l={default:1});if(a)for(const o in s)Bn(o)||null!=l[o]||delete s[o]})(e,t.children,n),Te(),tn(e),ke()},J=(e,t,n,o,r,s,a,l,i=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,f=t.children,{patchFlag:p,shapeFlag:g}=t;if(p>0){if(128&p)return void K(c,f,n,o,r,s,a,l,i);if(256&p)return void q(c,f,n,o,r,s,a,l,i)}8&g?(16&u&&ee(c,r,s),f!==c&&d(n,f)):16&u?16&g?K(c,f,n,o,r,s,a,l,i):ee(c,r,s,!0):(8&u&&d(n,''),16&g&&M(f,n,o,r,s,a,l,i))},q=(e,t,n,o,s,a,l,i,c)=>{t=t||r;const u=(e=e||r).length,d=t.length,f=Math.min(u,d);let p;for(p=0;p<f;p++){const o=t[p]=c?No(t[p]):Fo(t[p]);y(e[p],o,n,null,s,a,l,i,c)}u>d?ee(e,s,a,!0,!1,f):M(t,n,o,s,a,l,i,c,f)},K=(e,t,n,o,s,a,l,i,c)=>{let u=0;const d=t.length;let f=e.length-1,p=d-1;for(;u<=f&&u<=p;){const o=e[u],r=t[u]=c?No(t[u]):Fo(t[u]);if(!Mo(o,r))break;y(o,r,n,null,s,a,l,i,c),u++}for(;u<=f&&u<=p;){const o=e[f],r=t[p]=c?No(t[p]):Fo(t[p]);if(!Mo(o,r))break;y(o,r,n,null,s,a,l,i,c),f--,p--}if(u>f){if(u<=p){const e=p+1,r=e<d?t[e].el:o;for(;u<=p;)y(null,t[u]=c?No(t[u]):Fo(t[u]),n,r,s,a,l,i,c),u++}}else if(u>p)for(;u<=f;)Y(e[u],s,a,!0),u++;else{const g=u,h=u,m=new Map;for(u=h;u<=p;u++){const e=t[u]=c?No(t[u]):Fo(t[u]);null!=e.key&&m.set(e.key,u)}let v,b=0;const w=p-h+1;let x=!1,S=0;const T=new Array(w);for(u=0;u<w;u++)T[u]=0;for(u=g;u<=f;u++){const o=e[u];if(b>=w){Y(o,s,a,!0);continue}let r;if(null!=o.key)r=m.get(o.key);else for(v=h;v<=p;v++)if(0===T[v-h]&&Mo(o,t[v])){r=v;break}void 0===r?Y(o,s,a,!0):(T[r-h]=u+1,r>=S?S=r:x=!0,y(o,t[r],n,null,s,a,l,i,c),b++)}const k=x?function(e){const t=e.slice(),n=[0];let o,r,s,a,l;const i=e.length;for(o=0;o<i;o++){const i=e[o];if(0!==i){if(r=n[n.length-1],e[r]<i){t[o]=r,n.push(o);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,e[n[l]]<i?s=l+1:a=l;i<e[n[s]]&&(s>0&&(t[o]=n[s-1]),n[s]=o)}}s=n.length,a=n[s-1];for(;s-- >0;)n[s]=a,a=t[a];return n}(T):r;for(v=k.length-1,u=w-1;u>=0;u--){const e=h+u,r=t[e],f=t[e+1],p=e+1<d?f.el||f.placeholder:o;0===T[u]?y(null,r,n,p,s,a,l,i,c):x&&(v<0||u!==k[v]?G(r,n,p,2):v--)}}},G=(e,o,r,s,a=null)=>{const{el:l,type:i,transition:c,children:u,shapeFlag:d}=e;if(6&d)return void G(e.component.subTree,o,r,s);if(128&d)return void e.suspense.move(o,r,s);if(64&d)return void i.move(e,o,r,re);if(i===yo){t(l,o,r);for(let e=0;e<u.length;e++)G(u[e],o,r,s);return void t(e.anchor,o,r)}if(i===bo)return void S(e,o,r);if(2!==s&&1&d&&c)if(0===s)c.beforeEnter(l),t(l,o,r),Yn(()=>c.enter(l),a);else{const{leave:s,delayLeave:a,afterLeave:i}=c,u=()=>{e.ctx.isUnmounted?n(l):t(l,o,r)},d=()=>{l._isLeaving&&l[fn](!0),s(l,()=>{u(),i&&i()})};a?a(l,u,d):d()}else t(l,o,r)},Y=(e,t,n,o=!1,r=!1)=>{const{type:s,props:a,ref:l,children:i,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(-2===d&&(r=!1),null!=l&&(Te(),mn(l,null,n,e,!0),ke()),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const g=1&u&&f,h=!vn(e);let m;if(h&&(m=a&&a.onVnodeBeforeUnmount)&&Uo(m,t,e),6&u)Q(e.component,n,o);else{if(128&u)return void e.suspense.unmount(n,o);g&&un(e,null,t,'beforeUnmount'),64&u?e.type.remove(e,t,n,re,o):c&&!c.hasOnce&&(s!==yo||d>0&&64&d)?ee(c,t,n,!1,!0):(s===yo&&384&d||!r&&16&u)&&ee(i,t,n),o&&X(e)}(h&&(m=a&&a.onVnodeUnmounted)||g)&&Yn(()=>{m&&Uo(m,t,e),g&&un(e,null,t,'unmounted')},n)},X=e=>{const{type:t,el:o,anchor:r,transition:s}=e;if(t===yo)return void Z(o,r);if(t===bo)return void T(e);const a=()=>{n(o),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:n}=s,r=()=>t(o,a);n?n(e.el,a,r):r()}else a()},Z=(e,t)=>{let o;for(;e!==t;)o=g(e),n(e),e=o;n(t)},Q=(e,t,n)=>{const{bum:o,scope:r,job:s,subTree:a,um:l,m:i,a:c}=e;no(i),no(c),o&&R(o),r.stop(),s&&(s.flags|=8,Y(a,e,t,n)),l&&Yn(l,t),Yn(()=>{e.isUnmounted=!0},t)},ee=(e,t,n,o=!1,r=!1,s=0)=>{for(let a=s;a<e.length;a++)Y(e[a],t,n,o,r)},te=e=>{if(6&e.shapeFlag)return te(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=g(e.anchor||e.el),n=t&&t[dn];return n?g(n):t};let ne=!1;const oe=(e,t,n)=>{null==e?t._vnode&&Y(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),t._vnode=e,ne||(ne=!0,tn(),nn(),ne=!1)},re={p:y,um:Y,m:G,r:X,mt:H,mc:M,pc:J,pbc:D,n:te,o:e};let ae;return{render:oe,hydrate:ae,createApp:En(oe)}}(e)}function Zn({type:e,props:t},n){return'svg'===n&&'foreignObject'===e||'mathml'===n&&'annotation-xml'===e&&t&&t.encoding&&t.encoding.includes('html')?void 0:n}function Qn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function eo(e,t,n=!1){const o=e.children,r=t.children;if(p(o)&&p(r))for(let s=0;s<o.length;s++){const e=o[s];let t=r[s];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[s]=No(r[s]),t.el=e.el),n||-2===t.patchFlag||eo(e,t)),t.type===vo&&-1!==t.patchFlag&&(t.el=e.el),t.type!==_o||t.el||(t.el=e.el)}}function to(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:to(t)}function no(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const oo=Symbol.for('v-scx');function ro(e,t){return ao(e,null,t)}function so(e,t,n){return ao(e,t,n)}function ao(e,t,n=o){const{immediate:r,deep:a,flush:l,once:i}=n,u=c({},n),d=t&&r||!t&&'post'!==l;let f;if(Qo)if('sync'===l){const e=Ln(oo);f=e.__watcherHandles||(e.__watcherHandles=[])}else if(!d){const e=()=>{};return e.stop=s,e.resume=s,e.pause=s,e}const p=Jo;u.call=(e,t,n)=>Ut(e,p,t,n);let g=!1;'post'===l?u.scheduler=e=>{Yn(e,p&&p.suspense)}:'sync'!==l&&(g=!0,u.scheduler=(e,t)=>{t?e():Qt(e)}),u.augmentJob=e=>{t&&(e.flags|=4),g&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};const h=Nt(e,t,u);return Qo&&(f?f.push(h):d&&h()),h}const lo=(e,t)=>'modelValue'===t||'model-value'===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${O(t)}Modifiers`]||e[`${E(t)}Modifiers`];function io(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||o;let s=n;const a=t.startsWith('update:'),l=a&&lo(r,t.slice(7));let i;l&&(l.trim&&(s=n.map(e=>v(e)?e.trim():e)),l.number&&(s=n.map(N)));let c=r[i=L(t)]||r[i=L(O(t))];!c&&a&&(c=r[i=L(E(t))]),c&&Ut(c,e,6,s);const u=r[i+'Once'];if(u){if(e.emitted){if(e.emitted[i])return}else e.emitted={};e.emitted[i]=!0,Ut(u,e,6,s)}}function co(e,t,n=!1){const o=t.emitsCache,r=o.get(e);if(void 0!==r)return r;const s=e.emits;let a={};return s?(p(s)?s.forEach(e=>a[e]=null):c(a,s),w(e)&&o.set(e,a),a):(w(e)&&o.set(e,null),null)}function uo(e,t){return!(!e||!l(t))&&(t=t.slice(2).replace(/Once$/,''),f(e,t[0].toLowerCase()+t.slice(1))||f(e,E(t))||f(e,t))}function fo(e){const{type:t,vnode:n,proxy:o,withProxy:r,propsOptions:[s],slots:a,attrs:l,emit:c,render:u,renderCache:d,props:f,data:p,setupState:g,ctx:h,inheritAttrs:m}=e,y=ln(e);let v,b;try{if(4&n.shapeFlag){const e=r||o,t=e;v=Fo(u.call(t,e,d,f,g,p,h)),b=l}else{const e=t;0,v=Fo(e.length>1?e(f,{attrs:l,slots:a,emit:c}):e(f,null)),b=t.props?l:po(l)}}catch(x){wo.length=0,Bt(x,e,1),v=Do(_o)}let w=v;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=w;e.length&&7&t&&(s&&e.some(i)&&(b=go(b,s)),w=Lo(w,b,!1,!0))}return n.dirs&&(w=Lo(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&pn(w,n.transition),v=w,ln(y),v}const po=e=>{let t;for(const n in e)('class'===n||'style'===n||l(n))&&((t||(t={}))[n]=e[n]);return t},go=(e,t)=>{const n={};for(const o in e)i(o)&&o.slice(9)in t||(n[o]=e[o]);return n};function ho(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const s=o[r];if(t[s]!==e[s]&&!uo(n,s))return!0}return!1}const mo=e=>e.__isSuspense;const yo=Symbol.for('v-fgt'),vo=Symbol.for('v-txt'),_o=Symbol.for('v-cmt'),bo=Symbol.for('v-stc'),wo=[];let xo=null;function So(e=!1){wo.push(xo=e?null:[])}let To=1;function ko(e,t=!1){To+=e,e<0&&xo&&t&&(xo.hasOnce=!0)}function Io(e){return e.dynamicChildren=To>0?xo||r:null,wo.pop(),xo=wo[wo.length-1]||null,To>0&&xo&&xo.push(e),e}function Co(e,t,n,o,r,s){return Io(Eo(e,t,n,o,r,s,!0))}function Ao(e,t,n,o,r){return Io(Do(e,t,n,o,r,!0))}function $o(e){return!!e&&!0===e.__v_isVNode}function Mo(e,t){return e.type===t.type&&e.key===t.key}const Oo=({key:e})=>null!=e?e:null,Po=({ref:e,ref_key:t,ref_for:n})=>('number'==typeof e&&(e=''+e),null!=e?v(e)||kt(e)||y(e)?{i:sn,r:e,k:t,f:!!n}:e:null);function Eo(e,t=null,n=null,o=0,r=null,s=(e===yo?0:1),a=!1,l=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Oo(t),ref:t&&Po(t),scopeId:an,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:sn};return l?(Ho(i,n),128&s&&e.normalize(i)):n&&(i.shapeFlag|=v(n)?8:16),To>0&&!a&&xo&&(i.patchFlag>0||6&s)&&32!==i.patchFlag&&xo.push(i),i}const Do=function(e,t=null,n=null,o=0,r=null,s=!1){e&&e!==Sn||(e=_o);if($o(e)){const o=Lo(e,t,!0);return n&&Ho(o,n),To>0&&!s&&xo&&(6&o.shapeFlag?xo[xo.indexOf(e)]=o:xo.push(o)),o.patchFlag=-2,o}a=e,y(a)&&'__vccOpts'in a&&(e=e.__vccOpts);var a;if(t){t=function(e){return e?bt(e)||Rn(e)?c({},e):e:null}(t);let{class:e,style:n}=t;e&&!v(e)&&(t.class=K(e)),w(n)&&(bt(n)&&!p(n)&&(n=c({},n)),t.style=U(n))}const l=v(e)?1:mo(e)?128:(e=>e.__isTeleport)(e)?64:w(e)?4:y(e)?2:0;return Eo(e,t,n,o,r,l,s,!0)};function Lo(e,t,n=!1,o=!1){const{props:r,ref:s,patchFlag:a,children:l,transition:i}=e,c=t?Vo(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Oo(c),ref:t&&t.ref?n&&s?p(s)?s.concat(Po(t)):[s,Po(t)]:Po(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==yo?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Lo(e.ssContent),ssFallback:e.ssFallback&&Lo(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&pn(u,i.clone(u)),u}function jo(e=' ',t=0){return Do(vo,null,e,t)}function zo(e,t){const n=Do(bo,null,e);return n.staticCount=t,n}function Ro(e='',t=!1){return t?(So(),Ao(_o,null,e)):Do(_o,null,e)}function Fo(e){return null==e||'boolean'==typeof e?Do(_o):p(e)?Do(yo,null,e.slice()):$o(e)?No(e):Do(vo,null,String(e))}function No(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Lo(e)}function Ho(e,t){let n=0;const{shapeFlag:o}=e;if(null==t)t=null;else if(p(t))n=16;else if('object'==typeof t){if(65&o){const n=t.default;return void(n&&(n._c&&(n._d=!1),Ho(e,n()),n._c&&(n._d=!0)))}{n=32;const o=t._;o||Rn(t)?3===o&&sn&&(1===sn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=sn}}else y(t)?(t={default:t,_ctx:sn},n=32):(t=String(t),64&o?(n=16,t=[jo(t)]):n=8);e.children=t,e.shapeFlag|=n}function Vo(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)if('class'===e)t.class!==o.class&&(t.class=K([t.class,o.class]));else if('style'===e)t.style=U([t.style,o.style]);else if(l(e)){const n=t[e],r=o[e];!r||n===r||p(n)&&n.includes(r)||(t[e]=n?[].concat(n,r):r)}else''!==e&&(t[e]=o[e])}return t}function Uo(e,t,n,o=null){Ut(e,t,7,[n,o])}const Bo=On();let Wo=0;let Jo=null;const qo=()=>Jo||sn;let Ko,Go;{const e=V(),t=(t,n)=>{let o;return(o=e[t])||(o=e[t]=[]),o.push(n),e=>{o.length>1?o.forEach(t=>t(e)):o[0](e)}};Ko=t('__VUE_INSTANCE_SETTERS__',e=>Jo=e),Go=t('__VUE_SSR_SETTERS__',e=>Qo=e)}const Yo=e=>{const t=Jo;return Ko(e),e.scope.on(),()=>{e.scope.off(),Ko(t)}},Xo=()=>{Jo&&Jo.scope.off(),Ko(null)};function Zo(e){return 4&e.vnode.shapeFlag}let Qo=!1;function er(e,t,n){y(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:w(t)&&(e.setupState=Ot(t)),tr(e)}function tr(e,t,n){const o=e.type;e.render||(e.render=o.render||s)}const nr={get:(e,t)=>(Le(e,0,''),e[t])};function or(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ot(xt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in An?An[n](e):void 0,has:(e,t)=>t in e||t in An})):e.proxy}function rr(e,t=!0){return y(e)?e.displayName||e.name:e.name||t&&e.__name}const sr=(e,t)=>{const n=function(e,t,n=!1){let o,r;return y(e)?o=e:(o=e.get,r=e.set),new jt(o,r,n)}(e,0,Qo);return n},ar='3.5.24';
/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let lr;const ir='undefined'!=typeof window&&window.trustedTypes;if(ir)try{lr=ir.createPolicy('vue',{createHTML:e=>e})}catch(ua){}const cr=lr?e=>lr.createHTML(e):e=>e,ur='undefined'!=typeof document?document:null,dr=ur&&ur.createElement('template'),fr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r='svg'===t?ur.createElementNS('http://www.w3.org/2000/svg',e):'mathml'===t?ur.createElementNS('http://www.w3.org/1998/Math/MathML',e):n?ur.createElement(e,{is:n}):ur.createElement(e);return'select'===e&&o&&null!=o.multiple&&r.setAttribute('multiple',o.multiple),r},createText:e=>ur.createTextNode(e),createComment:e=>ur.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ur.querySelector(e),setScopeId(e,t){e.setAttribute(t,'')},insertStaticContent(e,t,n,o,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==s&&(r=r.nextSibling););else{dr.innerHTML=cr('svg'===o?`<svg>${e}</svg>`:'mathml'===o?`<math>${e}</math>`:e);const r=dr.content;if('svg'===o||'mathml'===o){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pr=Symbol('_vtc');const gr=Symbol('_vod'),hr=Symbol('_vsh'),mr={name:'show',beforeMount(e,{value:t},{transition:n}){e[gr]='none'===e.style.display?'':e.style.display,n&&t?n.beforeEnter(e):yr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),yr(e,!0),o.enter(e)):o.leave(e,()=>{yr(e,!1)}):yr(e,t))},beforeUnmount(e,{value:t}){yr(e,t)}};function yr(e,t){e.style.display=t?e[gr]:'none',e[hr]=!t}const vr=Symbol(''),_r=/(?:^|;)\s*display\s*:/;const br=/\s*!important$/;function wr(e,t,n){if(p(n))n.forEach(n=>wr(e,t,n));else if(null==n&&(n=''),t.startsWith('--'))e.setProperty(t,n);else{const o=function(e,t){const n=Sr[t];if(n)return n;let o=O(t);if('filter'!==o&&o in e)return Sr[t]=o;o=D(o);for(let r=0;r<xr.length;r++){const n=xr[r]+o;if(n in e)return Sr[t]=n}return t}(e,t);br.test(n)?e.setProperty(E(o),n.replace(br,''),'important'):e[o]=n}}const xr=['Webkit','Moz','ms'],Sr={};const Tr='http://www.w3.org/1999/xlink';function kr(e,t,n,o,r,s=G(t)){o&&t.startsWith('xlink:')?null==n?e.removeAttributeNS(Tr,t.slice(6,t.length)):e.setAttributeNS(Tr,t,n):null==n||s&&!Y(n)?e.removeAttribute(t):e.setAttribute(t,s?'':b(n)?String(n):n)}function Ir(e,t,n,o,r){if('innerHTML'===t||'textContent'===t)return void(null!=n&&(e[t]='innerHTML'===t?cr(n):n));const s=e.tagName;if('value'===t&&'PROGRESS'!==s&&!s.includes('-')){const o='OPTION'===s?e.getAttribute('value')||'':e.value,r=null==n?'checkbox'===e.type?'on':'':String(n);return o===r&&'_value'in e||(e.value=r),null==n&&e.removeAttribute(t),void(e._value=n)}let a=!1;if(''===n||null==n){const o=typeof e[t];'boolean'===o?n=Y(n):null==n&&'string'===o?(n='',a=!0):'number'===o&&(n=0,a=!0)}try{e[t]=n}catch(ua){}a&&e.removeAttribute(r||t)}function Cr(e,t,n,o){e.addEventListener(t,n,o)}const Ar=Symbol('_vei');function $r(e,t,n,o,r=null){const s=e[Ar]||(e[Ar]={}),a=s[t];if(o&&a)a.value=o;else{const[n,l]=function(e){let t;if(Mr.test(e)){let n;for(t={};n=e.match(Mr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=':'===e[2]?e.slice(3):E(e.slice(2));return[n,t]}(t);if(o){const a=s[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();Ut(function(e,t){if(p(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Er(),n}(o,r);Cr(e,n,a,l)}else a&&(!function(e,t,n,o){e.removeEventListener(t,n,o)}(e,n,a,l),s[t]=void 0)}}const Mr=/(?:Once|Passive|Capture)$/;let Or=0;const Pr=Promise.resolve(),Er=()=>Or||(Pr.then(()=>Or=0),Or=Date.now());const Dr=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Lr=e=>{const t=e.props['onUpdate:modelValue']||!1;return p(t)?e=>R(t,e):t};function jr(e){e.target.composing=!0}function zr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event('input')))}const Rr=Symbol('_assign');function Fr(e,t,n){return t&&(e=e.trim()),n&&(e=N(e)),e}const Nr={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e[Rr]=Lr(r);const s=o||r.props&&'number'===r.props.type;Cr(e,t?'change':'input',t=>{t.target.composing||e[Rr](Fr(e.value,n,s))}),(n||s)&&Cr(e,'change',()=>{e.value=Fr(e.value,n,s)}),t||(Cr(e,'compositionstart',jr),Cr(e,'compositionend',zr),Cr(e,'change',zr))},mounted(e,{value:t}){e.value=null==t?'':t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:r,number:s}},a){if(e[Rr]=Lr(a),e.composing)return;const l=null==t?'':t;if((!s&&'number'!==e.type||/^0\d/.test(e.value)?e.value:N(e.value))!==l){if(document.activeElement===e&&'range'!==e.type){if(o&&t===n)return;if(r&&e.value.trim()===l)return}e.value=l}}},Hr={deep:!0,created(e,_,t){e[Rr]=Lr(t),Cr(e,'change',()=>{const t=e._modelValue,n=Wr(e),o=e.checked,r=e[Rr];if(p(t)){const e=Z(t,n),s=-1!==e;if(o&&!s)r(t.concat(n));else if(!o&&s){const n=[...t];n.splice(e,1),r(n)}}else if(h(t)){const e=new Set(t);o?e.add(n):e.delete(n),r(e)}else r(Jr(e,o))})},mounted:Vr,beforeUpdate(e,t,n){e[Rr]=Lr(n),Vr(e,t,n)}};function Vr(e,{value:t,oldValue:n},o){let r;if(e._modelValue=t,p(t))r=Z(t,o.props.value)>-1;else if(h(t))r=t.has(o.props.value);else{if(t===n)return;r=X(t,Jr(e,!0))}e.checked!==r&&(e.checked=r)}const Ur={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=h(t);Cr(e,'change',()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?N(Wr(e)):Wr(e));e[Rr](e.multiple?r?new Set(t):t:t[0]),e._assigning=!0,Zt(()=>{e._assigning=!1})}),e[Rr]=Lr(o)},mounted(e,{value:t}){Br(e,t)},beforeUpdate(e,t,n){e[Rr]=Lr(n)},updated(e,{value:t}){e._assigning||Br(e,t)}};function Br(e,t){const n=e.multiple,o=p(t);if(!n||o||h(t)){for(let r=0,s=e.options.length;r<s;r++){const s=e.options[r],a=Wr(s);if(n)if(o){const e=typeof a;s.selected='string'===e||'number'===e?t.some(e=>String(e)===String(a)):Z(t,a)>-1}else s.selected=t.has(a);else if(X(Wr(s),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Wr(e){return'_value'in e?e._value:e.value}function Jr(e,t){const n=t?'_trueValue':'_falseValue';return n in e?e[n]:t}const qr=['ctrl','shift','alt','meta'],Kr={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>'button'in e&&0!==e.button,middle:e=>'button'in e&&1!==e.button,right:e=>'button'in e&&2!==e.button,exact:(e,t)=>qr.some(n=>e[`${n}Key`]&&!t.includes(n))},Gr=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join('.');return n[o]||(n[o]=(n,...o)=>{for(let e=0;e<t.length;e++){const o=Kr[t[e]];if(o&&o(n,t))return}return e(n,...o)})},Yr=c({patchProp:(e,t,n,o,r,s)=>{const a='svg'===r;'class'===t?function(e,t,n){const o=e[pr];o&&(t=(t?[t,...o]:[...o]).join(' ')),null==t?e.removeAttribute('class'):n?e.setAttribute('class',t):e.className=t}(e,o,a):'style'===t?function(e,t,n){const o=e.style,r=v(n);let s=!1;if(n&&!r){if(t)if(v(t))for(const e of t.split(';')){const t=e.slice(0,e.indexOf(':')).trim();null==n[t]&&wr(o,t,'')}else for(const e in t)null==n[e]&&wr(o,e,'');for(const e in n)'display'===e&&(s=!0),wr(o,e,n[e])}else if(r){if(t!==n){const e=o[vr];e&&(n+=';'+e),o.cssText=n,s=_r.test(n)}}else t&&e.removeAttribute('style');gr in e&&(e[gr]=s?o.display:'',e[hr]&&(o.display='none'))}(e,n,o):l(t)?i(t)||$r(e,t,0,o,s):('.'===t[0]?(t=t.slice(1),1):'^'===t[0]?(t=t.slice(1),0):function(e,t,n,o){if(o)return'innerHTML'===t||'textContent'===t||!!(t in e&&Dr(t)&&y(n));if('spellcheck'===t||'draggable'===t||'translate'===t||'autocorrect'===t)return!1;if('sandbox'===t&&'IFRAME'===e.tagName)return!1;if('form'===t)return!1;if('list'===t&&'INPUT'===e.tagName)return!1;if('type'===t&&'TEXTAREA'===e.tagName)return!1;if('width'===t||'height'===t){const t=e.tagName;if('IMG'===t||'VIDEO'===t||'CANVAS'===t||'SOURCE'===t)return!1}if(Dr(t)&&v(n))return!1;return t in e}(e,t,o,a))?(Ir(e,t,o),e.tagName.includes('-')||'value'!==t&&'checked'!==t&&'selected'!==t||kr(e,t,o,a,0,'value'!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&v(o)?('true-value'===t?e._trueValue=o:'false-value'===t&&(e._falseValue=o),kr(e,t,o,a)):Ir(e,O(t),o,0,t)}},fr);let Xr;const Zr=(...e)=>{const t=(Xr||(Xr=Xn(Yr))).createApp(...e),{mount:n}=t;return t.mount=e=>{const o=function(e){if(v(e)){return document.querySelector(e)}return e}(e);if(!o)return;const r=t._component;y(r)||r.render||r.template||(r.template=o.innerHTML),1===o.nodeType&&(o.textContent='');const s=n(o,!1,function(e){if(e instanceof SVGElement)return'svg';if('function'==typeof MathMLElement&&e instanceof MathMLElement)return'mathml'}(o));return o instanceof Element&&(o.removeAttribute('v-cloak'),o.setAttribute('data-v-app','')),s},t};function Qr(e){if('object'!=typeof e)return e;var t,n,o=Object.prototype.toString.call(e);if('[object Object]'===o){if(e.constructor!==Object&&'function'==typeof e.constructor)for(t in n=new e.constructor,e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=Qr(e[t]));else for(t in n={},e)'__proto__'===t?Object.defineProperty(n,t,{value:Qr(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=Qr(e[t]);return n}if('[object Array]'===o){for(t=e.length,n=Array(t);t--;)n[t]=Qr(e[t]);return n}return'[object Set]'===o?(n=new Set,e.forEach(function(e){n.add(Qr(e))}),n):'[object Map]'===o?(n=new Map,e.forEach(function(e,t){n.set(Qr(t),Qr(e))}),n):'[object Date]'===o?new Date(+e):'[object RegExp]'===o?((n=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,n):'[object DataView]'===o?new e.constructor(Qr(e.buffer)):'[object ArrayBuffer]'===o?e.slice(0):'Array]'===o.slice(-6)?new e.constructor(e):e}
/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let es;const ts=e=>es=e,ns=Symbol();function os(e){return e&&'object'==typeof e&&'[object Object]'===Object.prototype.toString.call(e)&&'function'!=typeof e.toJSON}var rs,ss;(ss=rs||(rs={})).direct='direct',ss.patchObject='patch object',ss.patchFunction='patch function';const as=()=>{};function ls(e,t,n,o=as){e.add(t);const r=()=>{e.delete(t)&&o()};var s;return!n&&le()&&(s=r,oe&&oe.cleanups.push(s)),r}function is(e,...t){e.forEach(e=>{e(...t)})}const cs=e=>e(),us=Symbol(),ds=Symbol();function fs(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],r=e[n];os(r)&&os(o)&&e.hasOwnProperty(n)&&!kt(o)&&!yt(o)?e[n]=fs(r,o):e[n]=o}return e}const ps=Symbol();function gs(e){return!os(e)||!Object.prototype.hasOwnProperty.call(e,ps)}const{assign:hs}=Object;function ms(e){return!(!kt(e)||!e.effect)}function ys(e,t,n,o){const{state:r,actions:s,getters:a}=t,l=n.state.value[e];let i;return i=vs(e,function(){l||(n.state.value[e]=r?r():{});const t=function(e){const t=p(e)?new Array(e.length):{};for(const n in e)t[n]=Lt(e,n);return t}(n.state.value[e]);return hs(t,s,Object.keys(a||{}).reduce((t,o)=>(t[o]=xt(sr(()=>{ts(n);const t=n._s.get(e);return a[o].call(t,t)})),t),{}))},t,n,o,!0),i}function vs(e,t,n={},o,r,s){let a;const l=hs({actions:{}},n),i={deep:!0};let c,u,d,f=new Set,p=new Set;const g=o.state.value[e];let h;function m(t){let n;c=u=!1,'function'==typeof t?(t(o.state.value[e]),n={type:rs.patchFunction,storeId:e,events:d}):(fs(o.state.value[e],t),n={type:rs.patchObject,payload:t,storeId:e,events:d});const r=h=Symbol();Zt().then(()=>{h===r&&(c=!0)}),u=!0,is(f,n,o.state.value[e])}s||g||(o.state.value[e]={}),It({});const y=s?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{hs(e,t)})}:as;const v=(t,n='')=>{if(us in t)return t[ds]=n,t;const r=function(){ts(o);const n=Array.from(arguments),s=new Set,a=new Set;let l;is(p,{args:n,name:r[ds],store:b,after:function(e){s.add(e)},onError:function(e){a.add(e)}});try{l=t.apply(this&&this.$id===e?this:b,n)}catch(i){throw is(a,i),i}return l instanceof Promise?l.then(e=>(is(s,e),e)).catch(e=>(is(a,e),Promise.reject(e))):(is(s,l),l)};return r[us]=!0,r[ds]=n,r},b=gt({_p:o,$id:e,$onAction:ls.bind(null,p),$patch:m,$reset:y,$subscribe(t,n={}){const r=ls(f,t,n.detached,()=>s()),s=a.run(()=>so(()=>o.state.value[e],o=>{('sync'===n.flush?u:c)&&t({storeId:e,type:rs.direct,events:d},o)},hs({},i,n)));return r},$dispose:function(){a.stop(),f.clear(),p.clear(),o._s.delete(e)}});o._s.set(e,b);const w=(o._a&&o._a.runWithContext||cs)(()=>o._e.run(()=>(a=ae()).run(()=>t({action:v}))));for(const x in w){const t=w[x];if(kt(t)&&!ms(t)||yt(t))s||(g&&gs(t)&&(kt(t)?t.value=g[x]:fs(t,g[x])),o.state.value[e][x]=t);else if('function'==typeof t){const e=v(t,x);w[x]=e,l.actions[x]=t}}return hs(b,w),hs(wt(b),w),Object.defineProperty(b,'$state',{get:()=>o.state.value[e],set:e=>{m(t=>{hs(t,e)})}}),o._p.forEach(e=>{hs(b,a.run(()=>e({store:b,app:o._a,pinia:o,options:l})))}),g&&s&&n.hydrate&&n.hydrate(b.$state,g),c=!0,u=!0,b}
/*! #__NO_SIDE_EFFECTS__ */function _s(e,t,n){let o;const r='function'==typeof t;function s(n,s){const a=!(!qo()&&!Dn);(n=n||(a?Ln(ns,null):null))&&ts(n),(n=es)._s.has(e)||(r?vs(e,t,o,n):ys(e,o,n));return n._s.get(e)}return o=r?n:t,s.$id=e,s}function bs(e){const t=wt(e),n={};for(const o in t){const r=t[o];r.effect?n[o]=sr({get:()=>e[o],set(t){e[o]=t}}):(kt(r)||yt(r))&&(n[o]=Dt(e,o))}return n}async function ws(e,t){try{if(window.parent&&window.parent.document)try{const n=window.parent.document.createElement('textarea');n.value=e,n.style.position='fixed',n.style.opacity='0',window.parent.document.body.appendChild(n),n.select();const o=window.parent.document.execCommand('copy');if(window.parent.document.body.removeChild(n),o)return t&&toastr.success(t),!0}catch(ua){console.warn('父窗口复制失败，尝试其他方法',ua)}try{const n=document.createElement('textarea');n.value=e,n.style.position='fixed',n.style.opacity='0',document.body.appendChild(n),n.select();const o=document.execCommand('copy');if(document.body.removeChild(n),o)return t&&toastr.success(t),!0}catch(ua){console.warn('当前窗口复制失败，尝试 Clipboard API',ua)}if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),t&&toastr.success(t),!0;throw new Error('所有复制方法都失败了')}catch(n){return console.error('复制失败:',n),toastr.error('复制失败，请手动复制'),!1}}function xs(){return Ts||(Ts='maomaomz_extension_v1'),Ts}function Ss(){try{if('undefined'!=typeof SillyTavern&&'function'==typeof SillyTavern.getContext){const e=SillyTavern.getContext();if(e?.chatId)return e.chatId}if(void 0!==window.TavernHelper&&'function'==typeof window.TavernHelper.getChatId){const e=window.TavernHelper.getChatId();if(e)return e}if('undefined'!=typeof SillyTavern&&'function'==typeof SillyTavern.getCurrentChatId){const e=SillyTavern.getCurrentChatId();if(e)return e}return'undefined'!=typeof SillyTavern&&SillyTavern.chatId?SillyTavern.chatId:(console.warn('⚠️ 无法获取聊天ID，可能未打开任何聊天'),'')}catch(e){return console.error('获取聊天 ID 失败:',e),''}}let z,Ts=null;try{z=require('zod')}catch(ua){console.warn('zod 不可用，使用备用方案'),z={object:e=>({parse:e=>e,default:e=>({parse:t=>t||e})}),string:()=>({default:e=>({parse:t=>t||e})}),number:()=>({default:e=>({parse:t=>t||e})}),boolean:()=>({default:e=>({parse:t=>t||e})}),array:e=>({default:e=>({parse:t=>Array.isArray(t)?t:e})})}}const ks=z.object({api_provider:z.string().default('openai'),api_endpoint:z.string().default('https://api.openai.com/v1'),api_key:z.string().default(''),model:z.string().default('gpt-4o-mini'),max_tokens:z.number().default(4e3),temperature:z.number().default(.7),top_p:z.number().default(1),presence_penalty:z.number().default(0),frequency_penalty:z.number().default(0),auto_summarize_enabled:z.boolean().default(!1),summarize_interval:z.number().default(50),start_message_id:z.number().default(0),end_message_id:z.number().default(0),table_start_message_id:z.number().default(0),table_end_message_id:z.number().default(0),summary_history:z.array(z.object({start_id:z.number(),end_id:z.number(),content:z.string()})).default([])}).default({});function Is(e,t='/chat/completions'){if(!e||''===e.trim())throw new Error('API 端点不能为空');const n=e.trim();if(n.includes('/chat/completions')||n.includes('/models'))return n;let o=n.endsWith('/')?n.slice(0,-1):n;return o.endsWith('/v1')||(o+='/v1'),o+t}function Cs(e){return e.trim().toLowerCase().includes('generativelanguage.googleapis.com')?'gemini':'openai'}const As=_s('settings',()=>{const e=(()=>{console.log('🔧 插件环境：使用 localStorage 存储设置');try{const e=localStorage.getItem('tavern_helper_settings');if(e)return It(ks.parse(JSON.parse(e)))}catch(ua){console.warn('从 localStorage 读取设置失败:',ua)}return It(ks.parse({}))})(),t=e=>{try{console.log('💾 插件环境：立即保存设置到 localStorage:',Qr(e)),localStorage.setItem('tavern_helper_settings',JSON.stringify(Qr(e))),console.log('✅ 设置已保存到 localStorage')}catch(ua){console.error('❌ 保存到 localStorage 失败:',ua),window.toastr?.error('设置保存失败: '+ua.message)}};let n=null;so(e,e=>{n&&clearTimeout(n),n=setTimeout(()=>{t(e)},300)},{immediate:!1,deep:!0}),'undefined'!=typeof window&&window.addEventListener('pagehide',()=>{console.log('⚠️ 页面卸载，立即保存设置'),t(e.value)});return{settings:e,saveSettings:()=>{try{return console.log('💾 插件环境：手动保存设置到 localStorage:',Qr(e.value)),localStorage.setItem('tavern_helper_settings',JSON.stringify(Qr(e.value))),window.toastr?.success('设置已保存（localStorage）'),!0}catch(ua){return console.error('❌ 保存到 localStorage 失败:',ua),window.toastr?.error('设置保存失败: '+ua.message),!1}},reloadSettings:()=>{try{const t=localStorage.getItem('tavern_helper_settings');return t?(e.value=ks.parse(JSON.parse(t)),console.log('✅ 设置从 localStorage 重新加载成功:',e.value),window.toastr?.success('设置已重新加载'),!0):(console.warn('未找到保存的设置'),window.toastr?.warning('未找到保存的设置'),!1)}catch(ua){return console.error('❌ 重新加载设置失败:',ua),window.toastr?.error('设置重新加载失败: '+ua.message),!1}}}}),$s=_s('summaryHistory',()=>({addSummary:(e,t,n)=>{try{const o=Ss();if(!o)return console.error('无法获取聊天 ID'),void window.toastr.error('无法获取当前聊天信息');console.log('添加总结到聊天:',o);const r=`${xs()}_summary_history_${o}`;let s=[];try{const e=localStorage.getItem(r);e&&(s=JSON.parse(e),Array.isArray(s)||(s=[]))}catch(ua){console.warn('读取聊天总结历史失败:',ua)}s.unshift({start_id:e,end_id:t,content:n}),s.length>50&&(s=s.slice(0,50)),localStorage.setItem(r,JSON.stringify(s)),console.log('总结已保存到 localStorage:',o)}catch(o){console.error('保存总结失败:',o),window.toastr.error('保存总结失败: '+o.message)}},getSummaryHistory:()=>{try{const e=Ss();if(!e)return[];const t=`${xs()}_summary_history_${e}`,n=localStorage.getItem(t);if(n){const e=JSON.parse(n);return Array.isArray(e)?e:[]}return[]}catch(ua){return console.warn('读取聊天总结历史失败:',ua),[]}}})),Ms=Object.freeze(Object.defineProperty({__proto__:null,detectApiProvider:Cs,filterApiParams:function(e,t){if('gemini'===Cs(t)){const t={model:e.model,messages:e.messages},n={};return void 0!==e.temperature&&(n.temperature=e.temperature),void 0!==e.max_tokens&&(n.maxOutputTokens=e.max_tokens),Object.keys(n).length>0&&(t.generation_config=n),console.log('🔍 检测到 Gemini API，已过滤不支持的参数'),console.log('原始参数:',e),console.log('过滤后参数:',t),t}return e},normalizeApiEndpoint:Is,useSettingsStore:As,useSummaryHistoryStore:$s},Symbol.toStringTag,{value:'Module'}));async function Os(e,t={}){try{const n=window.location.origin;console.log('🔄 尝试通过酒馆后端代理:',n);const o=await fetch(`${n}/api/proxy`,{method:'POST',headers:{'Content-Type':'application/json',...'undefined'!=typeof SillyTavern&&SillyTavern.getRequestHeaders?SillyTavern.getRequestHeaders():{}},body:JSON.stringify({url:e,method:t.method||'GET',headers:t.headers||{}})});if(o.ok)return console.log('✅ 成功通过酒馆后端代理'),o;console.log('⚠️ 酒馆代理不可用，尝试直接请求')}catch(n){console.log('⚠️ 酒馆代理失败，尝试直接请求:',n)}return fetch(e,t)}async function Ps(e,n){const o=As().settings;if(!o.api_endpoint||''===o.api_endpoint.trim())throw new Error('API 端点未配置');const r=o.api_endpoint.trim();let s;try{s=Is(r),console.log('📍 原始端点:',r),console.log('🔗 规范化的 API URL:',s)}catch(ua){throw new Error(`API 端点格式不正确: ${r}`)}try{new URL(s)}catch(ua){throw new Error(`API 端点格式不正确: ${s}`)}const a=[];try{if(void 0!==window.TavernHelper&&'function'==typeof window.TavernHelper.getChatMessages){const t=`${e}-${n}`,o=window.TavernHelper.getChatMessages(t);Array.isArray(o)&&o.length>0&&a.push(...o)}else for(let t=e;t<=n;t++)if('undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)&&SillyTavern.chat[t]){const e=SillyTavern.chat[t];e&&a.push({role:e.is_user?'user':'assistant',message:e.mes||''})}}catch(p){throw console.error('❌ 获取消息失败:',p),new Error('获取消息失败: '+p.message)}if(0===a.length)throw new Error(`没有可总结的消息（范围: ${e}-${n}）`);const l=`你是一位专业的剧情总结助手。请对以下对话内容进行总结，**重点总结正文剧情**。\n\n总结要求：\n- 按时间顺序或逻辑顺序组织信息\n- 保留关键事件和重要细节，省略冗余描述\n- 直接陈述事实，避免主观评价\n- 使用简洁清晰的语言，避免过度修饰\n- 突出事件发展脉络和关键转折点\n- 不使用任何XML标签，纯文字叙述\n- 不回避任何敏感内容，保证记录完全还原前文\n- 总结长度约 ${o.max_tokens/4} 字\n- **重要：直接输出总结内容，不要添加任何回复语、问候语或解释性文字**\n\n总结必须使用以下格式：\n【关键事件标题】\n关键事件概述。\n发生地点: [地点]\n关键角色: [角色列表]\n\n• 分解事件1（小标题形式）: 简要描述\n• 分解事件2（小标题形式）: 简要描述\n• 分解事件3（小标题形式）: 简要描述\n...\n\n对话内容：\n${a.map(e=>`[${e.role}]: ${e.message}`).join('\n\n')}\n\n直接输出总结内容，不要任何回复语：`;console.log('准备调用 API，URL:',s),console.log('请求体:',{model:o.model,messages:[{role:'user',content:l}],max_tokens:o.max_tokens,temperature:o.temperature});const{filterApiParams:i}=await t(async()=>{const{filterApiParams:e}=await Promise.resolve().then(()=>Ms);return{filterApiParams:e}},void 0),c=i({model:o.model,messages:[{role:'user',content:l}],max_tokens:o.max_tokens,temperature:o.temperature,top_p:o.top_p,presence_penalty:o.presence_penalty,frequency_penalty:o.frequency_penalty},o.api_endpoint);let u;try{u=await fetch(s,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${o.api_key}`},body:JSON.stringify(c)})}catch(ua){throw console.error('fetch 调用失败:',ua),new Error(`无法连接到 API: ${ua.message}`)}if(!u.ok){let e=`API 请求失败: ${u.status}`,t='';try{const n=await u.json();e=n.error?.message||n.message||e,t=JSON.stringify(n,null,2)}catch(ua){try{t=await u.text()}catch{}}let n=e;throw 500===u.status?n=`API 服务器内部错误 (500)：${e}\n\n这通常是暂时性问题，请稍后重试。如果问题持续，请检查：\n• API 服务状态\n• 账户配额是否充足\n• 请求内容是否过长`:429===u.status?n='API 请求频率限制 (429)：请求过于频繁，请稍后再试。':401===u.status?n='API 认证失败 (401)：请检查 API 密钥是否正确。':400===u.status&&(n=`API 请求参数错误 (400)：${e}`),console.error('❌ API 请求失败详情:',{status:u.status,statusText:u.statusText,errorMessage:e,errorDetails:t.substring(0,500)}),new Error(n)}const d=await u.json();console.log('✅ API 返回的完整数据:',JSON.stringify(d,null,2));let f=null;if(d.choices&&d.choices[0]&&d.choices[0].message?.content?f=d.choices[0].message.content:'string'==typeof d.content?f=d.content:'string'==typeof d?f=d:'string'==typeof d.result?f=d.result:'string'==typeof d.text?f=d.text:'string'==typeof d.response&&(f=d.response),!f)throw console.error('❌ 无法从返回数据中提取总结内容'),console.error('📋 API 返回的完整数据结构:',JSON.stringify(d,null,2)),new Error(`API 返回数据格式不符合预期。\n\n期望格式: { choices: [{ message: { content: "..." } }] }\n\n实际返回: ${JSON.stringify(d).substring(0,500)}...\n\n请检查您的 API 端点是否为 OpenAI 兼容格式。`);return console.log('✅ 成功提取总结内容'),f}const Es=Object.freeze(Object.defineProperty({__proto__:null,fetchAvailableModels:async function(){const e=As().settings;if(!e.api_endpoint||''===e.api_endpoint.trim())throw new Error('API 端点未配置');const t=e.api_endpoint.trim();let n;console.log('📍 原始端点:',t);try{n=Is(t,'/models'),console.log('🔗 规范化的 models 端点:',n)}catch(ua){throw new Error(`API 端点格式不正确: ${t}`)}try{new URL(n)}catch(ua){throw new Error(`API 端点格式不正确: ${n}`)}const o=[n,t+(t.endsWith('/')?'models':'/models'),new URL(n).origin+'/v1/models',new URL(n).origin+'/models'];console.log('🔍 尝试的模型端点:',o);const r=[];let s=!1;for(const l of o)try{console.log(`📡 正在请求: ${l}`);const t=await Os(l,{method:'GET',headers:{'Content-Type':'application/json',Authorization:`Bearer ${e.api_key}`}});if(console.log(`📊 响应状态: ${t.status} ${t.statusText}`),!t.ok){const e=await t.text();r.push(`${l}: ${t.status} - ${e.substring(0,100)}`),console.log(`❌ 端点返回错误: ${t.status}`),console.log(`错误详情: ${e.substring(0,200)}`);continue}const n=t.headers.get('content-type');if(console.log(`📄 内容类型: ${n}`),!n||!n.includes('application/json')){const e=await t.text();r.push(`${l}: 非 JSON 响应 - ${e.substring(0,100)}`),console.log('❌ 返回非 JSON 内容:',e.substring(0,200));continue}const o=await t.json();if(console.log('✅ API 返回数据:',JSON.stringify(o,null,2)),o.data&&Array.isArray(o.data)){const e=o.data.map(e=>e.id||e.name||e).filter(Boolean);if(console.log(`🎉 成功获取 ${e.length} 个模型:`,e),e.length>0)return e}if(Array.isArray(o)){const e=o.map(e=>e.id||e.name||e).filter(Boolean);if(console.log(`🎉 成功获取 ${e.length} 个模型:`,e),e.length>0)return e}if(o.models&&Array.isArray(o.models)){const e=o.models.map(e=>e.id||e.name||e).filter(Boolean);if(console.log(`🎉 成功获取 ${e.length} 个模型:`,e),e.length>0)return e}r.push(`${l}: 响应格式无法识别 - ${JSON.stringify(o).substring(0,100)}`),console.log('❌ 响应格式未识别')}catch(ua){const t=ua.message;(t.includes('Failed to fetch')||t.includes('CORS'))&&(s=!0),r.push(`${l}: ${t}`),console.log('❌ 请求失败:',ua);continue}console.error('❌ 所有端点都失败了，详细错误:'),r.forEach((e,t)=>console.error(`  ${t+1}. ${e}`));let a=`无法从 API 获取模型列表。尝试了 ${o.length} 个端点均失败。\n\n详细错误信息：\n${r.join('\n\n')}\n\n请检查：\n1. API 端点是否正确（当前：${t}）\n2. API Key 是否有效\n3. 该 API 是否支持 /v1/models 接口\n`;throw s&&(a+=`\n⚠️ 检测到 CORS 错误：\n这是因为你的 API 服务器（${new URL(t).origin}）没有配置 CORS 头。\n解决方案：\n• 在 Zeabur 项目设置中添加环境变量启用 CORS\n• 或在你的 API 服务器代码中添加 CORS 中间件\n• 或在酒馆主界面配置相同的 API，然后我们可以复用酒馆的配置\n\n`),a+='如果该 API 不支持模型列表接口，请手动输入模型名称。',new Error(a)},summarizeMessages:Ps},Symbol.toStringTag,{value:'Module'})),Ds='maomaomz_auth_code',Ls='maomaomz_auth_verified';async function js(e){try{const t=await fetch('https://maomaomz-auth.baobaoyu999727272.workers.dev/verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code:e.trim().toUpperCase()})});if(!t.ok)return{valid:!1,message:'❌ 网络请求失败，请检查网络连接'};return await t.json()}catch(t){return console.error('授权验证失败:',t),{valid:!1,message:'❌ 网络错误: '+t.message}}}function zs(){return new Promise(e=>{const t=document.createElement('div');t.id='maomaomz-auth-overlay',t.style.cssText='\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.92);\n      z-index: 9999999 !important;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      backdrop-filter: blur(10px);\n      animation: fadeIn 0.3s ease;\n    ';const n=document.createElement('div');n.style.cssText='\n      background: linear-gradient(135deg, #1a1a1a 0%, #2a1a1a 50%, #1a2a2a 100%);\n      border: 2px solid #3a3a3a;\n      border-radius: 20px;\n      padding: 40px;\n      max-width: 500px;\n      width: 90%;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n      color: #e0e0e0;\n      font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;\n    ',n.innerHTML='\n      <style>\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes slideUp {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n      </style>\n      <div style="text-align: center; animation: slideUp 0.4s ease;">\n        <div style="font-size: 60px; margin-bottom: 20px;">🐱</div>\n        <h2 style="\n          margin: 0 0 15px 0;\n          font-size: 28px;\n          background: linear-gradient(135deg, #ff9500 0%, #ffa500 100%);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          background-clip: text;\n        ">\n          猫猫的小破烂\n        </h2>\n        <div style="\n          background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);\n          color: #fff;\n          padding: 12px 20px;\n          border-radius: 10px;\n          margin: 20px 0;\n          font-weight: 700;\n          font-size: 14px;\n          letter-spacing: 1px;\n          box-shadow: 0 4px 16px rgba(220, 38, 38, 0.3);\n        ">\n          ⚠️ 商业化死全家，贩子死全家 ⚠️\n        </div>\n        <p style="\n          margin: 20px 0;\n          color: #ccc;\n          line-height: 1.6;\n          font-size: 15px;\n        ">\n          请输入今日授权码<br>\n          <span style="font-size: 13px; color: #888;">\n            授权码每天更新，请前往 Discord 查看\n          </span>\n        </p>\n        <input \n          type="text" \n          id="authCodeInput" \n          placeholder="例如：MEOW-20251111-ABCD"\n          style="\n            width: 100%;\n            padding: 14px 16px;\n            background: #0a0a0a;\n            border: 2px solid #3a3a3a;\n            border-radius: 12px;\n            color: #fff;\n            font-size: 16px;\n            font-family: \'Courier New\', monospace;\n            letter-spacing: 1px;\n            text-align: center;\n            text-transform: uppercase;\n            transition: border-color 0.3s ease;\n            margin-bottom: 20px;\n            box-sizing: border-box;\n          "\n        />\n        <div style="display: flex; gap: 12px;">\n          <button \n            id="authSubmitBtn"\n            style="\n              flex: 1;\n              padding: 14px 24px;\n              background: linear-gradient(135deg, #4a9eff 0%, #3b82f6 100%);\n              border: none;\n              border-radius: 12px;\n              color: #fff;\n              font-size: 16px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 4px 16px rgba(74, 158, 255, 0.3);\n            "\n          >\n            ✅ 验证授权码\n          </button>\n          <button \n            id="authCancelBtn"\n            style="\n              padding: 14px 24px;\n              background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);\n              border: none;\n              border-radius: 12px;\n              color: #fff;\n              font-size: 16px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 4px 16px rgba(107, 114, 128, 0.3);\n            "\n          >\n            ❌ 取消\n          </button>\n        </div>\n        <p style="\n          margin-top: 20px;\n          font-size: 12px;\n          color: #666;\n          line-height: 1.5;\n        ">\n          没有授权码？<br>\n          请访问我的 Discord 频道获取今日授权码\n        </p>\n      </div>\n    ',t.appendChild(n),document.body.appendChild(t);const o=n.querySelector('#authCodeInput'),r=n.querySelector('#authSubmitBtn'),s=n.querySelector('#authCancelBtn');setTimeout(()=>o.focus(),100),r.addEventListener('mouseenter',()=>{r.style.transform='translateY(-2px)',r.style.boxShadow='0 6px 20px rgba(74, 158, 255, 0.5)'}),r.addEventListener('mouseleave',()=>{r.style.transform='translateY(0)',r.style.boxShadow='0 4px 16px rgba(74, 158, 255, 0.3)'}),s.addEventListener('mouseenter',()=>{s.style.transform='translateY(-2px)',s.style.boxShadow='0 6px 20px rgba(107, 114, 128, 0.5)'}),s.addEventListener('mouseleave',()=>{s.style.transform='translateY(0)',s.style.boxShadow='0 4px 16px rgba(107, 114, 128, 0.3)'}),o.addEventListener('focus',()=>{o.style.borderColor='#4a9eff',o.style.boxShadow='0 0 0 3px rgba(74, 158, 255, 0.1)'}),o.addEventListener('blur',()=>{o.style.borderColor='#3a3a3a',o.style.boxShadow='none'});const a=()=>{const n=o.value.trim();if(!n)return o.style.borderColor='#ef4444',void o.focus();document.body.removeChild(t),e(n)};r.addEventListener('click',a),o.addEventListener('keypress',e=>{'Enter'===e.key&&a()}),s.addEventListener('click',()=>{document.body.removeChild(t),e(null)})})}window.clearAuth=function(){localStorage.removeItem(Ds),localStorage.removeItem(Ls),console.log('🗑️ 授权信息已清除'),window.toastr?.info('授权信息已清除，刷新页面后需要重新授权')};const Rs=function(){const e=ae(!0),t=e.run(()=>It({}));let n=[],o=[];const r=xt({install(e){ts(r),r._a=e,e.provide(ns,r),e.config.globalProperties.$pinia=r,o.forEach(e=>n.push(e)),o=[]},use(e){return this._a?n.push(e):o.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}(),Fs=_s('tasks',()=>{const e=It((()=>{try{const t=xs();if(!t)return[];const n=`${t}_tasks`,o=localStorage.getItem(n);if(o)try{const e=JSON.parse(o);if(Array.isArray(e))return console.log('📥 [任务管理] 从 localStorage 加载任务:',e.length),e}catch(e){console.error('❌ [任务管理] 解析任务数据失败:',e)}}catch(t){console.error('❌ [任务管理] 加载任务失败:',t)}return[]})());so(e,e=>{(e=>{try{const t=xs();if(!t)return;const n=e.slice(0,50),o=`${t}_tasks`;localStorage.setItem(o,JSON.stringify(n)),console.log('💾 [任务管理] 任务已保存到 localStorage:',n.length)}catch(t){console.error('❌ [任务管理] 保存任务失败:',t)}})(e)},{deep:!0});const t=t=>e.value.find(e=>e.id===t);return{tasks:e,createTask:(t,n)=>{const o=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={id:o,type:t,title:n,status:'pending',progress:0,message:'准备中...',details:[],startTime:Date.now()};return e.value.unshift(r),console.log('✅ [任务管理] 创建任务:',r.id,r.title),o},getTask:t,updateTaskProgress:(e,n,o)=>{const r=t(e);r&&(r.progress=n,r.message=o,'pending'===r.status&&(r.status='running'))},addTaskDetail:(e,n)=>{const o=t(e);o&&o.details.push(n)},completeTask:(e,n)=>{const o=t(e);o&&(o.status='completed',o.progress=100,o.message='完成！',o.endTime=Date.now(),o.result=n,console.log('✅ [任务管理] 任务完成:',o.id,`耗时: ${((o.endTime-o.startTime)/1e3).toFixed(1)}s`))},failTask:(e,n)=>{const o=t(e);o&&(o.status='failed',o.message='失败',o.endTime=Date.now(),o.error=n,console.error('❌ [任务管理] 任务失败:',o.id,n))},cancelTask:e=>{const n=t(e);n&&(n.status='cancelled',n.message='已取消',n.endTime=Date.now(),console.log('⚠️ [任务管理] 任务取消:',n.id))},removeTask:t=>{const n=e.value.findIndex(e=>e.id===t);-1!==n&&(e.value.splice(n,1),console.log('🗑️ [任务管理] 删除任务:',t))},clearCompletedTasks:()=>{const t=e.value.length;e.value=e.value.filter(e=>'running'===e.status||'pending'===e.status),console.log(`🧹 [任务管理] 清除已完成任务: ${t} -> ${e.value.length}`)},clearAllTasks:()=>{e.value=[],console.log('🧹 [任务管理] 清除所有任务')},runningTaskCount:()=>e.value.filter(e=>'running'===e.status).length}}),Ns={style:{display:'flex',alignItems:'center',gap:'10px'}},Hs={style:{background:'#4a9eff',color:'#fff',padding:'2px 8px',borderRadius:'10px',fontSize:'12px',fontWeight:600}},Vs={key:0,style:{background:'linear-gradient(135deg, #51cf66 0%, #37b24d 100%)',color:'#fff',padding:'2px 8px',borderRadius:'10px',fontSize:'11px',fontWeight:600,animation:'pulse 2s infinite'}},Us={style:{display:'flex',gap:'8px'}},Bs=['title'],Ws={key:0,style:{overflowY:'auto',maxHeight:'500px',padding:'12px',display:'flex',flexDirection:'column',gap:'12px',scrollbarWidth:'thin',scrollbarColor:'#4a9eff #1a1a1a'}},Js={key:0,style:{padding:'40px 20px',textAlign:'center',color:'#666',fontSize:'14px'}},qs=['onMouseleave'],Ks={style:{display:'flex',alignItems:'flex-start',gap:'10px'}},Gs={style:{flexShrink:0,width:'24px',height:'24px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'16px'}},Ys={key:0,class:'fa-solid fa-spinner fa-spin',style:{color:'#4a9eff'}},Xs={key:1,class:'fa-solid fa-check-circle',style:{color:'#51cf66'}},Zs={key:2,class:'fa-solid fa-times-circle',style:{color:'#ff6b6b'}},Qs={key:3,class:'fa-solid fa-ban',style:{color:'#ffa500'}},ea={key:4,class:'fa-solid fa-clock',style:{color:'#888'}},ta={style:{flex:1,minWidth:0}},na={style:{color:'#fff',fontSize:'13px',fontWeight:500,marginBottom:'4px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}},oa={style:{color:'#888',fontSize:'12px'}},ra=['onClick'],sa={key:0,style:{width:'100%',height:'4px',background:'rgba(255, 255, 255, 0.1)',borderRadius:'2px',overflow:'hidden',marginTop:'8px'}},aa={key:1,style:{marginTop:'8px',paddingTop:'8px',borderTop:'1px solid rgba(255, 255, 255, 0.05)'}},la={key:2,style:{marginTop:'8px',padding:'8px',background:'rgba(255, 107, 107, 0.1)',border:'1px solid rgba(255, 107, 107, 0.3)',borderRadius:'4px',color:'#ff6b6b',fontSize:'12px',wordBreak:'break-word'}},ia={style:{marginTop:'8px',color:'#666',fontSize:'11px',textAlign:'right'}},ca=gn({__name:'TaskManager',setup(e){const t=Fs(),n=It(!1),o=It(!0),r=sr(()=>t.runningTaskCount());so(()=>t.tasks.length,(e,t)=>{e>t&&e>0&&(o.value=!0)}),console.log('📊 [TaskManager] 组件已挂载，当前任务数:',t.tasks.length);const s=()=>{n.value=!n.value},a=()=>{o.value=!1},l=()=>{t.clearCompletedTasks()},i=e=>{if(e.endTime){return`耗时 ${((e.endTime-e.startTime)/1e3).toFixed(1)}s`}return`进行中 ${((Date.now()-e.startTime)/1e3).toFixed(0)}s`};return(e,c)=>o.value?(So(),Co('div',{key:0,style:U({position:'fixed',bottom:'20px',right:'20px',width:n.value?'auto':'420px',maxHeight:n.value?'none':'600px',background:'linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%)',border:'2px solid #4a9eff',borderRadius:'12px',boxShadow:'0 8px 24px rgba(0, 0, 0, 0.5), 0 0 20px rgba(74, 158, 255, 0.3)',zIndex:99999,display:'flex',flexDirection:'column',overflow:'hidden',backdropFilter:'blur(10px)',animation:'slideIn 0.3s ease'})},[Eo('div',{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'12px 16px',background:'linear-gradient(135deg, rgba(74, 158, 255, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%)',borderBottom:'1px solid rgba(74, 158, 255, 0.3)',cursor:'pointer',userSelect:'none',transition:'all 0.2s'},onClick:s,onMouseenter:c[6]||(c[6]=e=>e.currentTarget.style.background='linear-gradient(135deg, rgba(74, 158, 255, 0.25) 0%, rgba(118, 75, 162, 0.25) 100%)'),onMouseleave:c[7]||(c[7]=e=>e.currentTarget.style.background='linear-gradient(135deg, rgba(74, 158, 255, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%)')},[Eo('div',Ns,[c[11]||(c[11]=Eo('i',{class:'fa-solid fa-tasks',style:{color:'#4a9eff'}},null,-1)),c[12]||(c[12]=Eo('span',{style:{color:'#fff',fontSize:'15px',fontWeight:600}},'任务中心',-1)),Eo('span',Hs,ee(At(t).tasks.length),1),r.value>0?(So(),Co('span',Vs,ee(r.value)+' 运行中 ',1)):Ro('',!0)]),Eo('div',Us,[n.value?Ro('',!0):(So(),Co('button',{key:0,title:'清除已完成',style:{background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.1)',color:'#ccc',padding:'6px 10px',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s',fontSize:'13px'},onClick:Gr(l,['stop']),onMouseenter:c[0]||(c[0]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)',e.currentTarget.style.borderColor='#4a9eff',e.currentTarget.style.color='#4a9eff',e.currentTarget.style.transform='scale(1.05)'}),onMouseleave:c[1]||(c[1]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.05)',e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)',e.currentTarget.style.color='#ccc',e.currentTarget.style.transform='scale(1)'})},[...c[13]||(c[13]=[Eo('i',{class:'fa-solid fa-broom'},null,-1)])],32)),Eo('button',{title:n.value?'展开':'折叠',style:{background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.1)',color:'#ccc',padding:'6px 10px',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s',fontSize:'13px'},onMouseenter:c[2]||(c[2]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)',e.currentTarget.style.borderColor='#4a9eff',e.currentTarget.style.color='#4a9eff',e.currentTarget.style.transform='scale(1.05)'}),onMouseleave:c[3]||(c[3]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.05)',e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)',e.currentTarget.style.color='#ccc',e.currentTarget.style.transform='scale(1)'})},[Eo('i',{class:K(n.value?'fa-solid fa-chevron-up':'fa-solid fa-chevron-down')},null,2)],40,Bs),Eo('button',{title:'关闭任务中心',style:{background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.1)',color:'#ccc',padding:'6px 10px',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s',fontSize:'13px'},onClick:Gr(a,['stop']),onMouseenter:c[4]||(c[4]=e=>{e.currentTarget.style.background='rgba(255, 107, 107, 0.2)',e.currentTarget.style.borderColor='#ff6b6b',e.currentTarget.style.color='#ff6b6b',e.currentTarget.style.transform='scale(1.05)'}),onMouseleave:c[5]||(c[5]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.05)',e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)',e.currentTarget.style.color='#ccc',e.currentTarget.style.transform='scale(1)'})},[...c[14]||(c[14]=[Eo('i',{class:'fa-solid fa-times'},null,-1)])],32)])],32),n.value?Ro('',!0):(So(),Co('div',Ws,[0===At(t).tasks.length?(So(),Co('div',Js,[...c[15]||(c[15]=[Eo('i',{class:'fa-solid fa-inbox',style:{'font-size':'48px','margin-bottom':'16px',color:'#444'}},null,-1),Eo('div',null,'暂无任务',-1),Eo('div',{style:{'font-size':'12px','margin-top':'8px'}},'发起生成任务后会在这里显示',-1)])])):Ro('',!0),(So(!0),Co(yo,null,In(At(t).tasks,e=>(So(),Co('div',{key:e.id,style:U({background:'rgba(42, 42, 42, 0.8)',border:'1px solid '+('completed'===e.status?'rgba(81, 207, 102, 0.3)':'failed'===e.status?'rgba(255, 107, 107, 0.3)':'rgba(255, 255, 255, 0.1)'),borderRadius:'8px',padding:'12px',transition:'all 0.2s'}),onMouseenter:c[10]||(c[10]=e=>{e.currentTarget.style.background='rgba(42, 42, 42, 1)',e.currentTarget.style.borderColor='rgba(74, 158, 255, 0.3)',e.currentTarget.style.transform='translateX(-2px)'}),onMouseleave:t=>{t.currentTarget.style.background='rgba(42, 42, 42, 0.8)',t.currentTarget.style.borderColor='completed'===e.status?'rgba(81, 207, 102, 0.3)':'failed'===e.status?'rgba(255, 107, 107, 0.3)':'rgba(255, 255, 255, 0.1)',t.currentTarget.style.transform='translateX(0)'}},[Eo('div',Ks,[Eo('div',Gs,['running'===e.status?(So(),Co('i',Ys)):'completed'===e.status?(So(),Co('i',Xs)):'failed'===e.status?(So(),Co('i',Zs)):'cancelled'===e.status?(So(),Co('i',Qs)):(So(),Co('i',ea))]),Eo('div',ta,[Eo('div',na,ee(e.title),1),Eo('div',oa,ee(e.message),1)]),Eo('button',{title:'删除任务',style:{background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.1)',color:'#ccc',padding:'6px 10px',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s',fontSize:'13px',flexShrink:0},onClick:n=>{return o=e.id,void t.removeTask(o);var o},onMouseenter:c[8]||(c[8]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)',e.currentTarget.style.borderColor='#4a9eff',e.currentTarget.style.color='#4a9eff',e.currentTarget.style.transform='scale(1.05)'}),onMouseleave:c[9]||(c[9]=e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.05)',e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)',e.currentTarget.style.color='#ccc',e.currentTarget.style.transform='scale(1)'})},[...c[16]||(c[16]=[Eo('i',{class:'fa-solid fa-times'},null,-1)])],40,ra)]),'running'===e.status?(So(),Co('div',sa,[Eo('div',{style:U({width:e.progress+'%',height:'100%',background:'linear-gradient(90deg, #4a9eff 0%, #667eea 50%, #4a9eff 100%)',backgroundSize:'200% 100%',animation:'progressSlide 2s linear infinite',transition:'width 0.3s ease'})},null,4)])):Ro('',!0),e.details.length>0?(So(),Co('div',aa,[(So(!0),Co(yo,null,In(e.details,(e,t)=>(So(),Co('div',{key:t,style:{color:'#999',fontSize:'11px',padding:'2px 0'}},ee(e),1))),128))])):Ro('',!0),e.error?(So(),Co('div',la,ee(e.error),1)):Ro('',!0),Eo('div',ia,ee(i(e)),1)],44,qs))),128))]))],4)):Ro('',!0)}});$(()=>{(async()=>{console.log('🔐 【优先级最高】开始插件授权验证...');if(!(await async function(){console.log('🔐 【强制授权】开始授权验证...');const e=document.getElementById('maomaomz-auth-overlay');e&&e.remove();const t=localStorage.getItem(Ds);if(t){if(console.log('📋 找到已保存的授权码，后台验证中...'),(await js(t)).valid)return console.log('✅ 授权验证成功！（已保存的授权码有效）'),localStorage.setItem(Ls,'true'),setTimeout(()=>{window.toastr?.success('✅ 授权验证成功！猫猫欢迎你！🐱','',{timeOut:2e3})},300),!0;console.warn('⚠️ 保存的授权码已失效，需要重新输入'),localStorage.removeItem(Ds),localStorage.removeItem(Ls)}console.log('🔐 需要用户输入授权码，显示授权对话框...');let n=0;for(;n<5;){const e=await zs();if(!e){if(console.error('❌ 用户取消了授权'),confirm('⚠️ 未授权无法使用插件\n\n是否放弃授权？\n\n点击"确定"将禁用插件\n点击"取消"继续输入授权码'))return window.toastr?.error('❌ 授权已取消，插件已被禁用','',{timeOut:0,extendedTimeOut:0}),!1;continue}n++,console.log(`🔄 验证授权码... (尝试 ${n}/5)`),window.toastr?.info('🔄 正在验证授权码，请稍候...','',{timeOut:3e3});const t=await js(e);if(t.valid)return localStorage.setItem(Ds,e),localStorage.setItem(Ls,'true'),console.log('✅ 授权验证成功！'),window.toastr?.success(t.message,'授权成功',{timeOut:3e3}),!0;if(console.warn(`❌ 授权验证失败 (尝试 ${n}/5):`,t.message),window.toastr?.error(t.message,`验证失败 (${n}/5)`,{timeOut:5e3}),n>=5)return window.toastr?.error('❌ 授权验证失败次数过多\n\n插件已被禁用，请刷新页面重试','授权失败',{timeOut:0,extendedTimeOut:0}),!1}return!1}()))return console.error('❌ 授权验证失败，插件将不会加载'),void setTimeout(()=>{window.toastr&&window.toastr.error('❌ 未通过授权验证\n\n插件已被禁用，请刷新页面重新输入授权码\n\n前往 Discord 获取最新授权码','授权失败',{timeOut:0,extendedTimeOut:0})},500);console.log('✅ 授权验证通过，开始加载插件UI和功能...'),await t(()=>import('./浮动面板.ffExLTB3.chunk.js'),__vite__mapDeps([0,1])),await t(()=>import('./添加导航按钮.D4VySo6M.chunk.js'),[]),console.log('✅ UI模块加载完成'),setTimeout(()=>{const e='maomaomz_extension_v1';Ts=e,console.log('🐱 猫猫的记忆管理工具开始初始化，插件ID:',e);const t=()=>{try{console.log('🔍 开始检查自动总结...');const t=As();if(!t||!t.settings)return void console.warn('❌ 无法获取设置，跳过自动总结检查');const n=t.settings;if('boolean'!=typeof n.auto_summarize_enabled)return void console.warn('❌ 自动总结设置无效，跳过检查');if('number'!=typeof n.summarize_interval||n.summarize_interval<1)return void console.warn('❌ 总结间隔设置无效，跳过检查');if(console.log('📋 当前设置:',{auto_summarize_enabled:n.auto_summarize_enabled,summarize_interval:n.summarize_interval,has_api_key:!!n.api_key}),!n.auto_summarize_enabled)return void console.log('⏸️ 自动总结未启用');if(!n.api_key)return void console.log('❌ API Key 未设置');let o=0;if(void 0!==window.TavernHelper)if('function'==typeof window.TavernHelper.getLastMessageId)try{o=window.TavernHelper.getLastMessageId(),console.log('✅ 通过 TavernHelper.getLastMessageId() 获取到消息ID:',o)}catch(e){console.warn('⚠️ TavernHelper.getLastMessageId() 调用失败:',e),o=-1}else if('function'==typeof window.TavernHelper.getChatMessages)try{const e=window.TavernHelper.getChatMessages('0-{{lastMessageId}}');Array.isArray(e)&&e.length>0&&(o=e.length-1,console.log('✅ 通过 TavernHelper.getChatMessages() 获取到消息数:',e.length))}catch(e){console.warn('⚠️ TavernHelper.getChatMessages() 调用失败:',e),o=-1}if(o<0&&'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)&&(o=SillyTavern.chat.length-1,console.log('✅ 通过 SillyTavern.chat.length 获取到消息ID:',o)),o<0&&'function'==typeof window.getLastMessageId)try{o=window.getLastMessageId(),console.log('✅ 通过 getLastMessageId() 获取到消息ID:',o)}catch(e){console.warn('⚠️ getLastMessageId() 调用失败:',e)}if(o<0)return void console.warn('⚠️ 无法获取最后一条消息ID');const r=Ss();if(!r)return void console.log('❌ 无法获取聊天ID，跳过自动总结检查');let s=0;try{const e=xs(),t=`${e}_auto_summary_start_id_${r}`,n=localStorage.getItem(t);if(console.log('🔍 检查 localStorage:',{current_chat_id:r,storageKey:t,savedStartId:n}),null!==n)s=parseInt(n,10),console.log(`✅ 使用现有起始楼层: ${s} (聊天: ${r})`);else{if(!e)return void console.warn('script_id 为空，无法检查现有总结');const n=`${e}_summary_history_${r}`,a=localStorage.getItem(n),l=a?JSON.parse(a):[];if(Array.isArray(l)&&l.length>0){const e=l[0].end_id||0;o>e?(s=e+1,console.log(`🔄 重新加载聊天，基于现有总结设置起始楼层: ${s} (最后总结结束于第 ${e} 层)`),window.toastr?.info(`重新加载聊天，起始楼层设置为第 ${s} 层`)):(s=o,console.log(`🔄 重新加载聊天，当前楼层已总结，从当前楼层开始: ${o}`),window.toastr?.info(`重新加载聊天，从当前楼层开始: ${o}`))}else s=0,console.log(`🆕 新聊天窗口，设置起始楼层: 0 (聊天: ${r}) - 从AI开场白开始`),window.toastr?.info('新聊天窗口，起始楼层设置为第 0 层（AI开场白）');s<0&&(s=0,console.log('⚠️ 修正起始楼层为0，从AI开场白开始')),localStorage.setItem(t,String(s))}}catch(e){console.warn('获取自动总结起始楼层失败，使用当前楼层:',e),s=o}console.log(`检查自动总结: 当前楼层=${o}, 起始楼层=${s}, 间隔=${n.summarize_interval}`);const a=o-s,l=a>=n.summarize_interval-1;if(console.log('🧮 计算检查:',{last_message_id:o,auto_summary_start_id:s,relative_position:a,summarize_interval:n.summarize_interval,should_trigger:l,calculation:`${a} >= ${n.summarize_interval-1} (包含起始楼层，共${a+1}层)`,expected_trigger_at_floor:s+n.summarize_interval-1,will_summarize_range:`${s}-${s+n.summarize_interval-1}`,floor_explanation:'楼层编号：0=AI开场白, 1=用户, 2=AI, 3=用户...'}),o>=s&&l){const e=s,t=s+n.summarize_interval-1;console.log(`🎯 触发自动总结: 楼层 ${e}-${t}`),window.toastr.info(`🔄 开始自动总结楼层 ${e}-${t}...`),Ps(e,t).then(n=>{console.log(`✅ 自动总结完成: 楼层 ${e}-${t}`,n);try{$s().addSummary(e,t,n)}catch(ua){console.error('添加自动总结到历史失败:',ua)}const o=t+1,r=xs(),s=Ss();if(r&&s){const e=`${r}_auto_summary_start_id_${s}`;localStorage.setItem(e,String(o)),console.log(`🔄 更新起始楼层为: ${o}`)}window.toastr.success(`✅ 已自动总结第 ${e}-${t} 楼，下次将从第 ${o} 楼开始`)}).catch(e=>{console.error('❌ 自动总结失败：',e),window.toastr.error('❌ 自动总结失败：'+e.message)})}}catch(e){console.error('checkAutoSummarize 发生错误：',e)}};console.log('🔍 环境诊断: eventOn 不可用，使用 DOM 监控方案');let n=-1,o=null;(()=>{try{const e=document.getElementById('chat');return e?(o=new MutationObserver(e=>{let o=!1;for(const t of e){if(t.addedNodes.length>0)for(const e of Array.from(t.addedNodes))if(1===e.nodeType){const t=e,n=Array.from(t.classList);if(n.includes('mes')&&!n.includes('mes_stop')){o=!0;break}}if(o)break}o&&(console.log('📨 检测到新消息节点，延迟检查自动总结...'),setTimeout(()=>{let e=-1;if(void 0!==window.TavernHelper)if('function'==typeof window.TavernHelper.getLastMessageId)try{e=window.TavernHelper.getLastMessageId(),console.log('✅ 通过 TavernHelper.getLastMessageId() 获取到消息ID:',e)}catch(o){console.warn('⚠️ TavernHelper.getLastMessageId() 调用失败:',o)}else if('function'==typeof window.TavernHelper.getChatMessages)try{const t=window.TavernHelper.getChatMessages('0-{{lastMessageId}}');Array.isArray(t)&&t.length>0&&(e=t.length-1,console.log('✅ 通过 TavernHelper.getChatMessages() 获取到消息数:',t.length,'最后ID:',e))}catch(o){console.warn('⚠️ TavernHelper.getChatMessages() 调用失败:',o)}if(e<0&&'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)&&(e=SillyTavern.chat.length-1,console.log('✅ 通过 SillyTavern.chat.length 获取到消息ID:',e)),e<0&&'function'==typeof window.getLastMessageId)try{e=window.getLastMessageId(),console.log('✅ 通过 getLastMessageId() 获取到消息ID:',e)}catch(o){console.warn('⚠️ getLastMessageId() 调用失败:',o)}console.log('🔍 DOM 监控检查结果:',{currentMessageId:e,lastCheckedMessageId:n,'条件满足':e>=0&&e!==n}),e>=0&&e!==n?(n=e,console.log(`🔄 DOM 监控触发自动总结检查，当前消息ID: ${e}`),t()):e<0?console.warn('⚠️ 无法获取有效的消息ID，跳过自动总结检查'):console.log('ℹ️ 消息ID未变化，跳过检查')},500))}),o.observe(e,{childList:!0,subtree:!0}),console.log('✅ DOM 监控已启动，监控容器: #chat'),!0):(console.warn('⚠️ 未找到聊天容器 #chat'),!1)}catch(e){return console.error('❌ DOM 监控设置失败:',e),!1}})()?console.log('✅ 使用 DOM 监控方案'):console.log('⚠️ DOM 监控失败，使用轮询方案'),setInterval(()=>{try{let o=-1;if(void 0!==window.TavernHelper)if('function'==typeof window.TavernHelper.getLastMessageId)try{o=window.TavernHelper.getLastMessageId()}catch(e){console.warn('⚠️ 轮询：TavernHelper.getLastMessageId() 调用失败:',e)}else if('function'==typeof window.TavernHelper.getChatMessages)try{const e=window.TavernHelper.getChatMessages('0-{{lastMessageId}}');Array.isArray(e)&&e.length>0&&(o=e.length-1)}catch(e){console.warn('⚠️ 轮询：TavernHelper.getChatMessages() 调用失败:',e)}if(o<0&&'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)&&(o=SillyTavern.chat.length-1),o<0&&'function'==typeof window.getLastMessageId)try{o=window.getLastMessageId()}catch(e){console.warn('⚠️ 轮询：getLastMessageId() 调用失败:',e)}o>=0&&o!==n&&(n=o,console.log(`🔄 轮询检测到消息变化，检查自动总结... 当前消息ID: ${o}`),t())}catch(e){console.error('❌ 轮询检查失败:',e)}},3e3),console.log('✅ 轮询检查已启动（每3秒）'),$(window).on('pagehide',()=>{o&&o.disconnect()});const r=As();if(r&&r.settings){const e=so(()=>r.settings.auto_summarize_enabled,(e,t)=>{if(console.log(`🔄 自动总结设置变化: ${t} -> ${e}`),e&&!t)try{const e=xs();if(!e)return void console.warn('script_id 为空，无法检查起始楼层');const t=`${e}_auto_summary_start_id_${Ss()}`,o=localStorage.getItem(t);if(o)console.log(`✅ 自动总结已开启，使用现有起始楼层: ${o}`),window.toastr?.info(`自动总结已开启，起始楼层: ${o}`);else{let e=0;if(void 0!==window.TavernHelper)if('function'==typeof window.TavernHelper.getLastMessageId)try{e=window.TavernHelper.getLastMessageId()}catch(n){console.warn('⚠️ TavernHelper.getLastMessageId() 调用失败:',n),e=-1}else if('function'==typeof window.TavernHelper.getChatMessages)try{const t=window.TavernHelper.getChatMessages('0-{{lastMessageId}}');Array.isArray(t)&&t.length>0&&(e=t.length-1)}catch(n){console.warn('⚠️ TavernHelper.getChatMessages() 调用失败:',n),e=-1}if(e<0&&'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)&&(e=SillyTavern.chat.length-1),e<0&&'function'==typeof window.getLastMessageId)try{e=window.getLastMessageId()}catch(n){console.warn('⚠️ getLastMessageId() 调用失败:',n)}e>=0?(localStorage.setItem(t,String(e)),console.log(`✅ 首次开启自动总结，起始楼层设置为: ${e}`),window.toastr?.info(`自动总结已开启，将从第 ${e} 层开始`)):(console.warn('⚠️ 无法获取消息ID，起始楼层设置为 0'),localStorage.setItem(t,'0'),window.toastr?.warn('无法获取当前消息数，起始楼层设置为 0'))}}catch(n){console.error('❌ 检查起始楼层失败:',n)}},{immediate:!1});$(window).on('pagehide',()=>{e()})}window.smartResetChat=()=>{try{if(console.log('🔄 开始智能重置起始楼层...'),'undefined'==typeof SillyTavern)return console.error('❌ SillyTavern API 不可用'),void window.toastr.error('SillyTavern API 不可用');const t=Ss();if(console.log('获取到的聊天ID:',t,'类型:',typeof t),!t&&0!==t)return console.error('❌ 无法获取当前聊天ID，可能未打开任何聊天'),void window.toastr.error('请先打开一个聊天');let n=0,o=[];if('undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)?(n=SillyTavern.chat.length-1,o=SillyTavern.chat):'function'==typeof getLastMessageId&&'function'==typeof getChatMessages&&(n=getLastMessageId(),o=getChatMessages('0-{{lastMessageId}}')),console.log('最新消息ID:',n),console.log('获取到的消息数量:',o.length),n<0)return console.warn('⚠️ 当前聊天没有消息'),void window.toastr.warning('当前聊天没有消息');const r=n;try{const e=`${xs()}_auto_summary_start_id_${t}`;localStorage.setItem(e,String(r)),console.log('✅ 变量已写入 localStorage')}catch(e){throw console.error('❌ 写入变量失败:',e),new Error('写入变量失败: '+e.message)}console.log(`✅ 起始楼层已重置为: ${r}`),window.toastr.success(`起始楼层已重置为第 ${r} 层`),console.log('重置详情:',{'聊天ID':String(t),'当前楼层':r,'消息数量':o.length})}catch(t){console.error('❌ 重置起始楼层失败:',t),console.error('错误堆栈:',t.stack),window.toastr.error('重置起始楼层失败: '+t.message)}},window.testCompleteAutoSummary=()=>{try{console.log('🧪 开始测试完整自动总结流程...');const e=As().settings;console.log('当前设置:',{'自动总结开启':e.auto_summarize_enabled,'总结间隔':e.summarize_interval,'保存到世界书':e.auto_save_to_worldbook});let t=0,n=[];'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)?(t=SillyTavern.chat.length-1,n=SillyTavern.chat):'function'==typeof getLastMessageId&&'function'==typeof getChatMessages&&(t=getLastMessageId(),n=getChatMessages('0-{{lastMessageId}}'));const o=Ss(),r=`${xs()}_auto_summary_start_id_${o}`,s=localStorage.getItem(r)||'0';console.log('当前状态:',{'聊天ID':o,'当前楼层':t,'起始楼层':s,'间隔':e.summarize_interval}),window.toastr.info('测试信息已输出到控制台')}catch(e){console.error('❌ 测试失败:',e),window.toastr.error('测试失败: '+e.message)}},window.syncAutoSummaryData=()=>{try{console.log('🔄 开始同步数据...');const e=Ss();if(!e)return console.error('❌ 无法获取当前聊天ID'),void window.toastr.error('无法获取当前聊天ID');const t=xs(),n=`${t}_auto_summary_start_id_${e}`,o=localStorage.getItem(n);console.log('插件环境 localStorage 数据:',{'聊天ID':e,'起始楼层':o,'插件ID':t}),window.toastr.success('数据已同步，请查看控制台')}catch(e){console.error('❌ 同步失败:',e),window.toastr.error('同步失败: '+e.message)}},window.checkCurrentFloor=()=>{try{console.log('🔍 开始检查楼层...');let e=0,t=[];if('undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)?(e=SillyTavern.chat.length-1,t=SillyTavern.chat):'function'==typeof getLastMessageId&&'function'==typeof getChatMessages&&(e=getLastMessageId(),t=getChatMessages('0-{{lastMessageId}}')),e<0)return console.warn('⚠️ 当前聊天没有消息'),void window.toastr.warning('当前聊天没有消息');const n=e,o=xs(),r=`${o}_auto_summary_start_id_${Ss()}`,s=localStorage.getItem(r)||'0';console.log('楼层信息:',{'当前楼层':n,'起始楼层':s,'消息总数':t.length,'最后一条消息':t[t.length-1]}),window.toastr.info(`当前楼层: ${n}, 起始楼层: ${s}`)}catch(e){console.error('❌ 检查失败:',e),window.toastr.error('检查失败: '+e.message)}},window.testFloorCalculation=()=>{try{console.log('🧮 开始验证楼层计算...');const e=As().settings;let t=0;'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)?t=SillyTavern.chat.length-1:'function'==typeof getLastMessageId&&(t=getLastMessageId());const n=t,o=xs(),r=`${o}_auto_summary_start_id_${Ss()}`,s=parseInt(localStorage.getItem(r)||'0'),a=n-s,l=a>0&&a%e.summarize_interval===0;console.log('计算结果:',{'当前楼层':n,'起始楼层':s,'相对位置':a,'总结间隔':e.summarize_interval,'是否触发':l,'下次触发楼层':s+e.summarize_interval}),window.toastr.info(`相对位置: ${a}, 是否触发: ${l}`)}catch(e){console.error('❌ 计算验证失败:',e),window.toastr.error('计算验证失败: '+e.message)}},window.checkAutoSummaryStatus=()=>{try{console.log('📊 开始检查自动总结状态...');const e=As().settings;let t=0,n=[];'undefined'!=typeof SillyTavern&&Array.isArray(SillyTavern.chat)?(t=SillyTavern.chat.length-1,n=SillyTavern.chat):'function'==typeof getLastMessageId&&'function'==typeof getChatMessages&&(t=getLastMessageId(),n=getChatMessages('0-{{lastMessageId}}'));const o=Ss(),r=`${xs()}_auto_summary_start_id_${o}`,s=localStorage.getItem(r)||'0',a={'基本信息':{'聊天ID':o,'当前楼层':t,'消息总数':n.length},'设置信息':{'自动总结开启':e.auto_summarize_enabled,'总结间隔':e.summarize_interval,'保存到世界书':e.auto_save_to_worldbook,'API配置':e.api_endpoint?'已配置':'未配置'},'状态信息':{'起始楼层':s,'存储方式':'localStorage'}};console.log('状态详情:',a),console.table(a.基本信息),console.table(a.设置信息),window.toastr.success('状态信息已输出到控制台')}catch(e){console.error('❌ 状态检查失败:',e),window.toastr.error('状态检查失败: '+e.message)}},window.manualCheckSummary=()=>{try{console.log('🔍 手动检查自动总结...'),t(),window.toastr.info('已手动触发总结检查，请查看控制台')}catch(e){console.error('❌ 手动检查失败:',e),window.toastr.error('手动检查失败: '+e.message)}},console.log('✅ 调试函数已注册:',['smartResetChat','testCompleteAutoSummary','syncAutoSummaryData','checkCurrentFloor','testFloorCalculation','checkAutoSummaryStatus','manualCheckSummary']),window.pinia={globalPinia:Rs,useSettingsStore:As,useSummaryHistoryStore:$s},window.getScriptIdSafe=xs,window.getChatIdSafe=Ss,console.log('✅ 全局对象已暴露:',{pinia:'✅ Pinia 实例和 Store 函数',getScriptIdSafe:'✅ 获取脚本ID',getChatIdSafe:'✅ 获取聊天ID'}),window.toastr.success('🐱 猫猫的小破烂已加载 | 授权验证成功')},200)})()}),$(()=>{setTimeout(()=>{try{if('true'!==localStorage.getItem(Ls))return void console.warn('⚠️ 未授权，跳过任务管理器挂载');if(document.getElementById('global-task-manager'))return void console.log('⚠️ 任务管理器容器已存在，跳过重复挂载');const e=document.createElement('div');e.id='global-task-manager',e.style.cssText='position: fixed; z-index: 999999;',document.body.appendChild(e),console.log('📦 任务管理器容器已创建:',e);const t=Zr(ca);t.use(Rs),t.mount('#global-task-manager'),console.log('✅ 全局任务管理器已成功挂载')}catch(e){console.error('❌ 挂载任务管理器失败:',e),window.toastr?.error('任务管理器挂载失败')}},1e3)});export{mr as A,Is as B,xn as C,Ss as D,ro as E,yo as F,wn as G,Hr as H,Ur as I,$t as J,$s as K,At as L,Ao as M,Tn as N,Vo as O,Zr as P,Rs as Q,Ms as R,Es as S,t as _,Ro as a,Gr as b,Co as c,gn as d,Eo as e,cn as f,jo as g,zo as h,In as i,K as j,Fs as k,sr as l,bn as m,U as n,So as o,Do as p,xs as q,It as r,bs as s,ee as t,As as u,Nr as v,so as w,Qr as x,ws as y,gt as z};
//# sourceMappingURL=index.js.map
